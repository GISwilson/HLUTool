<Window x:Class="HLU.WindowMain"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:hlu="clr-namespace:HLU.UI.UserControls;assembly="
        xmlns:tkit="http://schemas.microsoft.com/wpf/2008/toolkit"
        Title="{Binding Path=WindowTitle}"
        Width="500"
        Height="760"
        Icon="..\..\Icons\HLUIcon.png"
        KeyUp="Window_KeyUp"
        Loaded="Window_Loaded"
        SizeToContent="Height"
        Topmost="{Binding ElementName=MenuItemAppKeepOnTop,
                          Path=IsChecked}"
        WindowStyle="SingleBorderWindow">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Dictionary\CodeDescriptionConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\VagueDateConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\Bool2VisibilityConverterDictionary.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <DockPanel Width="Auto"
               Margin="0,0,0,0"
               HorizontalAlignment="Stretch"
               VerticalAlignment="Stretch"
               Cursor="{Binding Path=WindowCursor}">

        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Name="MenuItemExport"
                          Command="{Binding Path=ExportCommand}"
                          Header="Ex_port"
                          IsEnabled="{Binding Path=CanExport}" />
                <MenuItem Name="MenuItemExit"
                          Command="{Binding Path=CloseCommand}"
                          Header="E_xit" />
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Name="MenuItemEdit"
                          Command="{Binding Path=CopyCommand}"
                          Header="_Copy"
                          IsEnabled="{Binding Path=CanCopy}" />
                <MenuItem Name="MenuItemPaste"
                          Command="{Binding Path=PasteCommand}"
                          Header="Paste"
                          IsEnabled="{Binding Path=CanPaste}" />
                <MenuItem Name="MenuItemBulkUpdate"
                          Command="{Binding Path=BulkUpdateCommandMenu}"
                          Header="{Binding Path=BulkUpdateCommandHeader}"
                          IsEnabled="{Binding Path=CanBulkUpdate}" />
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem Name="MenuItemGisMaximise"
                          Command="{Binding Path=GisWinMaximiseCommand}"
                          Header="_Maximise GIS Window"
                          IsEnabled="{Binding Path=CanGisWinMaximise}" />
                <MenuItem Name="MenuItemGisSideBySide"
                          Command="{Binding Path=GisWinSideBySideCommand}"
                          Header="Windows _Side By Side"
                          IsEnabled="{Binding Path=CanGisWinSideBySide}" />
                <MenuItem Name="MenuItemAppKeepOnTop"
                          Header="_Keep DB Window on Top"
                          IsCheckable="True" />


                <MenuItem Name="MenuItemGisSwitchTo"
                          Command="{Binding Path=GisWinSwitchToCommand}"
                          Header="S_witch To GIS Window"
                          IsEnabled="{Binding Path=CanGisWinSwitchTo}" />
                <MenuItem Name="MenuItemZoomSelected"
                          Command="{Binding Path=ZoomSelectionCommand}"
                          Header="_Zoom To Selection"
                          IsEnabled="{Binding Path=CanZoomSelection}" />
            </MenuItem>
            <MenuItem Header="_Select">
                <MenuItem Name="MenuItemSelectByAttributes"
                          Command="{Binding Path=SelectByAttributesCommand}"
                          Header="Select by _Attributes"
                          IsEnabled="{Binding Path=CanSelectByAttributes}" />
                <MenuItem Name="MenuItemClearFilter"
                          Command="{Binding Path=ClearFilterCommand}"
                          Header="_Clear Filter"
                          IsEnabled="{Binding Path=IsFiltered}" />
                <MenuItem Name="MenuItemSelectOnMap"
                          Command="{Binding Path=SelectOnMapCommand}"
                          Header="Select C_urrent INCID on Map"
                          IsEnabled="{Binding Path=CanSelectOnMap}" />
                <MenuItem Name="MenuItemGetMapSelection"
                          Command="{Binding Path=ReadMapSelectionCommand}"
                          Header="Get _Map Selection"
                          IsEnabled="{Binding Path=CanReadMapSelection}" />
                <MenuItem Name="MenuItemSelectByIncid"
                          Command="{Binding Path=SelectByIncidCommand}"
                          Header="Select by _INCID"
                          IsEnabled="{Binding Path=CanSelectByIncid}" />
            </MenuItem>
            <MenuItem Header="Split/_Merge">
                <MenuItem Name="MenuItemSplit"
                          Command="{Binding Path=SplitCommand}"
                          Header="_Split Features"
                          IsEnabled="{Binding Path=CanSplit}" />
                <MenuItem Name="MenuItemMerge"
                          Command="{Binding Path=MergeCommand}"
                          Header="_Merge Features"
                          IsEnabled="{Binding Path=CanMerge}" />
            </MenuItem>
            <MenuItem Header="_Tools">
                <MenuItem Name="MenuItemOptions"
                          Command="{Binding Path=OptionsCommand}"
                          Header="_Options" />
                <MenuItem Name="MenuItemSwitchGisLayer"
                          Command="{Binding Path=SwitchGisLayerCommand}"
                          Header="Switch _GIS Layer" />
                <MenuItem Name="MenuItemAbout"
                          Command="{Binding Path=AboutCommand}"
                          Header="_About" />
            </MenuItem>
        </Menu>

        <ToolBarTray Name="ToolBarTrayMain" DockPanel.Dock="Top">
            <ToolBar Name="ToolBarMain"
                     Band="1"
                     BandIndex="1">
                <Button Name="ButtonExit"
                        Command="{Binding Path=CloseCommand}"
                        ToolTip="Exit"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\FileExit.png" />
                </Button>
                <Button Name="ButtonExport"
                        Command="{Binding Path=ExportCommand}"
                        IsEnabled="{Binding Path=CanExport}"
                        ToolTip="Export"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\FileExport.png" />
                </Button>
                <Button Name="ButtonCopy"
                        Command="{Binding Path=CopyCommand}"
                        IsEnabled="{Binding Path=CanCopy}"
                        ToolTip="Copy"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\EditCopy.png" />
                </Button>
                <Button Name="ButtonPaste"
                        Command="{Binding Path=PasteCommand}"
                        IsEnabled="{Binding Path=CanPaste}"
                        ToolTip="Paste"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\EditPaste.png" />
                </Button>
                <!--
                    <Button Name="ButtonBulkUpdate"
                    Command="{Binding Path=BulkUpdateCommand}"
                    IsEnabled="{Binding Path=CanBulkUpdate}"
                    ToolTip="Bulk Update"
                    ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                    Height="16"
                    Source="..\..\Icons\EditBulkUpdate.png" />
                    </Button>
                -->
            </ToolBar>
            <ToolBar Name="ToolBarView"
                     Band="1"
                     BandIndex="2">
                <Button Name="ButtonGisMaximise"
                        Command="{Binding Path=GisWinMaximiseCommand}"
                        IsEnabled="{Binding Path=CanGisWinMaximise}"
                        ToolTip="Maximise GIS Window"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\GisWinMaximise.png" />
                </Button>
                <Button Name="ButtonGisSideBySide"
                        Command="{Binding Path=GisWinSideBySideCommand}"
                        IsEnabled="{Binding Path=CanGisWinSideBySide}"
                        ToolTip="Windows Side By Side"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\GisWinSideBySide.png" />
                </Button>
                <!--
                    <Button Name="ButtonGisSwitchTo"
                    Command="{Binding Path=GisWinSwitchToCommand}"
                    IsEnabled="{Binding Path=CanGisWinSwitchTo}"
                    ToolTip="Switch To GIS Window"
                    ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                    Height="16"
                    Source="..\..\Icons\GisWinSwitchTo.png" />
                    </Button>
                -->
                <Button Name="ButtonZoomSelected"
                        Command="{Binding Path=ZoomSelectionCommand}"
                        IsEnabled="{Binding Path=CanZoomSelection}"
                        ToolTip="Zoom to Selection"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\ZoomSelection.png" />
                </Button>
            </ToolBar>
            <ToolBar Name="ToolBarSelect"
                     Band="1"
                     BandIndex="3">
                <Button Name="ButtonSelectByAttributes"
                        Command="{Binding Path=SelectByAttributesCommand}"
                        IsEnabled="{Binding Path=CanSelectByAttributes}"
                        ToolTip="Select by Attributes"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\SelectByAttributes.png" />
                </Button>
                <Button Name="ButtonSelectOnMap"
                        Command="{Binding Path=SelectOnMapCommand}"
                        IsEnabled="{Binding Path=CanSelectOnMap}"
                        ToolTip="Select Current INCID on Map"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\SelectOnMap.png" />
                </Button>
                <Button Name="ButtonClearFilter"
                        Command="{Binding Path=ClearFilterCommand}"
                        IsEnabled="{Binding Path=IsFiltered}"
                        ToolTip="Clear Filter"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\ClearFilter.png" />
                </Button>
                <Button Name="ButtonGetMapSelection"
                        Command="{Binding Path=ReadMapSelectionCommand}"
                        IsEnabled="{Binding Path=CanReadMapSelection}"
                        ToolTip="Get Map Selection"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\ReadMapSelection.png" />
                </Button>
                <Button Name="ButtonSelectByIncid"
                        Command="{Binding Path=SelectByIncidCommand}"
                        IsEnabled="{Binding Path=CanSelectByIncid}"
                        ToolTip="Select by INCID"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\SelectByIncid.png" />
                </Button>
            </ToolBar>
            <ToolBar Name="ToolBarSplitMerge"
                     Band="1"
                     BandIndex="4">
                <Button Name="ButtonSplit"
                        Command="{Binding Path=SplitCommand}"
                        IsEnabled="{Binding Path=CanSplit}"
                        ToolTip="Split Features"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\SplitFeatures.png" />
                </Button>
                <Button Name="ButtonMergeFeatures"
                        Command="{Binding Path=MergeCommand}"
                        IsEnabled="{Binding Path=CanMerge}"
                        ToolTip="Merge Features"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\MergeFeatures.png" />
                </Button>
            </ToolBar>
            <ToolBar Name="ToolBarTools"
                     Band="1"
                     BandIndex="5">
                <Button Name="ButtonOptions"
                        Command="{Binding Path=OptionsCommand}"
                        ToolTip="Options"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\Options.png" />
                </Button>
                <Button Name="ButtonSwitchGISLayer"
                        Command="{Binding Path=SwitchGisLayerCommand}"
                        ToolTip="Switch GIS Layer"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\SwitchGISLayer.png" />
                </Button>
            </ToolBar>
        </ToolBarTray>

        <Grid Name="GridMain" Margin="4">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="5*" />
                <RowDefinition Height="487*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--  GroupBoxTopControls  -->
            <GroupBox Name="GroupBoxTopControls"
                      Grid.Row="0"
                      Grid.Column="0"
                      Header="{Binding Path=TopControlsGroupHeader}"
                      Visibility="{Binding Path=HideInBulkUpdateMode,
                                           Converter={StaticResource bool2VisibilityConverter},
                                           Mode=TwoWay}">
                <Grid Name="GridTopControls"
                      Grid.Row="0"
                      Margin="0,4,0,0"
                      Panel.ZIndex="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Label Name="LabelIncid"
                           Grid.Row="0"
                           Grid.Column="0"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        INCID
                    </Label>
                    <TextBox Name="TextBoxIncid"
                             Grid.Row="0"
                             Grid.Column="1"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             Text="{Binding Path=Incid,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}" />

                    <Grid Name="GridIncidAttributes"
                          Grid.Row="0"
                          Grid.Column="2"
                          Grid.ColumnSpan="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Label Name="LabelIncidArea"
                               Grid.Row="0"
                               Grid.Column="0"
                               Margin="12,0,0,4"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center">
                            Area [ha]
                        </Label>
                        <TextBox Name="TextBoxIncidArea"
                                 Grid.Row="0"
                                 Grid.Column="1"
                                 Margin="8,0,8,4"
                                 VerticalAlignment="Center"
                                 IsEnabled="False"
                                 Text="{Binding Path=IncidArea,
                                                Mode=OneWay,
                                                ValidatesOnDataErrors=False}"
                                 TextAlignment="Right" />
                        <Label Name="LabelIncidLength"
                               Grid.Row="0"
                               Grid.Column="2"
                               Margin="12,0,0,4"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center">
                            Length [km]
                        </Label>
                        <TextBox Name="TextBoxIncidLength"
                                 Grid.Row="0"
                                 Grid.Column="3"
                                 Margin="8,0,4,4"
                                 VerticalAlignment="Center"
                                 IsEnabled="False"
                                 Text="{Binding Path=IncidLength,
                                                Mode=OneWay,
                                                ValidatesOnDataErrors=False}"
                                 TextAlignment="Right" />
                    </Grid>

                    <Label Name="LabelIncidCreatedDate"
                           Grid.Row="1"
                           Grid.Column="0"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Visibility="{Binding Path=HideInBulkUpdateMode,
                                                Converter={StaticResource bool2VisibilityConverter}}">
                        Created
                    </Label>
                    <TextBox Name="TextBoxIncidCreatedDate"
                             Grid.Row="1"
                             Grid.Column="1"
                             Margin="8,0,4,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             Text="{Binding Path=IncidCreatedDate,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Right"
                             Visibility="{Binding Path=HideInBulkUpdateMode,
                                                  Converter={StaticResource bool2VisibilityConverter}}" />

                    <Label Name="LabelIncidCreatedUser"
                           Grid.Row="1"
                           Grid.Column="2"
                           Margin="12,0,0,4"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center"
                           Visibility="{Binding Path=HideInBulkUpdateMode,
                                                Converter={StaticResource bool2VisibilityConverter}}">
                        By
                    </Label>
                    <TextBox Name="TextBoxIncidCreatedUser"
                             Grid.Row="1"
                             Grid.Column="3"
                             Margin="8,0,4,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             Text="{Binding Path=IncidCreatedUser,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Right"
                             Visibility="{Binding Path=HideInBulkUpdateMode,
                                                  Converter={StaticResource bool2VisibilityConverter}}" />

                    <Label Name="LabelIncidLastModDate"
                           Grid.Row="2"
                           Grid.Column="0"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Visibility="{Binding Path=HideInBulkUpdateMode,
                                                Converter={StaticResource bool2VisibilityConverter}}">
                        Modified
                    </Label>
                    <TextBox Name="TextBoxIncidLastModDate"
                             Grid.Row="2"
                             Grid.Column="1"
                             Margin="8,0,4,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             Text="{Binding Path=IncidLastModifiedDate,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Right"
                             Visibility="{Binding Path=HideInBulkUpdateMode,
                                                  Converter={StaticResource bool2VisibilityConverter}}" />

                    <Label Name="LabelIncidLastModUser"
                           Grid.Row="2"
                           Grid.Column="2"
                           Margin="12,0,0,4"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center"
                           Visibility="{Binding Path=HideInBulkUpdateMode,
                                                Converter={StaticResource bool2VisibilityConverter}}">
                        By
                    </Label>
                    <TextBox Name="TextBoxIncidLastModUser"
                             Grid.Row="2"
                             Grid.Column="3"
                             Margin="8,0,4,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             Text="{Binding Path=IncidLastModifiedUser,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Right"
                             Visibility="{Binding Path=HideInBulkUpdateMode,
                                                  Converter={StaticResource bool2VisibilityConverter}}" />

                </Grid>
            </GroupBox>

            <!--  GroupBoxTopControlsBulkUpdate  -->
            <GroupBox Name="GroupBoxTopControlsBulkUpdate"
                      Grid.Row="0"
                      Grid.Column="0"
                      Header="Bulk Update"
                      Visibility="{Binding Path=ShowInBulkUpdateMode,
                                           Converter={StaticResource bool2VisibilityConverter},
                                           Mode=TwoWay}">
                <Grid Name="GridTopControlsBulkUpdate"
                      Grid.Row="0"
                      Margin="0,4,0,0"
                      Panel.ZIndex="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Label Name="LabelBulkUpdateStatusDB"
                           Grid.Row="0"
                           Grid.Column="0"
                           Margin="0,0,8,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        DB:
                    </Label>
                    <Label Name="LabelBulkUpdateStatusIncid"
                           Grid.Row="0"
                           Grid.Column="1"
                           Margin="0,0,8,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        INCID
                    </Label>
                    <TextBox Name="TextBoxBulkUpdateStatusIncid"
                             Grid.Row="0"
                             Grid.Column="2"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             Text="{Binding Path=NumIncidSelected,
                                            Mode=OneWay}"
                             TextAlignment="Left" />

                    <Label Name="LabelBulkUpdateStatusMap"
                           Grid.Row="1"
                           Grid.Column="0"
                           Margin="0,0,8,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        Map:
                    </Label>
                    <Label Name="LabelBulkUpdateStatusIncidMap"
                           Grid.Row="1"
                           Grid.Column="1"
                           Margin="0,0,8,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        INCID
                    </Label>
                    <TextBox Name="TextBoxBulkUpdateStatusIncidMap"
                             Grid.Row="1"
                             Grid.Column="2"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             Text="{Binding Path=NumIncidSelectedMap,
                                            Mode=OneWay}"
                             TextAlignment="Left" />
                    <Label Name="LabelBulkUpdateStatusToid"
                           Grid.Row="1"
                           Grid.Column="3"
                           Margin="12,0,8,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        TOID
                    </Label>
                    <TextBox Name="TextBoxBulkUpdateStatusToid"
                             Grid.Row="1"
                             Grid.Column="4"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             Text="{Binding Path=NumToidSelectedMap,
                                            Mode=OneWay}"
                             TextAlignment="Left" />
                    <Label Name="LabelBulkUpdateStatusFrag"
                           Grid.Row="1"
                           Grid.Column="5"
                           Margin="12,0,8,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        Fragments
                    </Label>
                    <TextBox Name="TextBoxBulkUpdateStatusFrag"
                             Grid.Row="1"
                             Grid.Column="6"
                             Margin="8,0,4,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             Text="{Binding Path=NumFragmentsSelectedMap,
                                            Mode=OneWay}"
                             TextAlignment="Left" />

                    <Grid Name="GridCreateHistory"
                          Grid.Row="2"
                          Grid.Column="0"
                          Grid.ColumnSpan="7"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="20" />
                        </Grid.ColumnDefinitions>
                        <Label Name="LabelBulkUpdateCreateHistory"
                               Grid.Column="0"
                               Margin="0,0,8,0"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center">
                            Create History
                        </Label>
                        <CheckBox Name="CheckBoxUpdateCreateHistory"
                                  Grid.Column="1"
                                  Margin="0,0,0,0"
                                  HorizontalAlignment="Right"
                                  VerticalAlignment="Bottom"
                                  IsChecked="{Binding Path=BulkUpdateCreateHistory}" />
                    </Grid>
                </Grid>
            </GroupBox>

            <!--  GroupBoxReasonProcess  -->
            <GroupBox Name="GroupBoxReasonProcess"
                      Grid.Row="1"
                      Margin="0,4,0,0">
                <Grid Name="GridReasonProcess"
                      Grid.Row="1"
                      Margin="0,4,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="20" />
                    </Grid.ColumnDefinitions>

                    <Label Name="LabelReason"
                           Grid.Row="0"
                           Grid.Column="0"
                           Margin="8,0,8,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        Reason
                    </Label>
                    <ComboBox Name="ComboBoxReason"
                              Grid.Row="0"
                              Grid.Column="1"
                              Margin="8,0,8,4"
                              VerticalAlignment="Center"
                              DisplayMemberPath="description"
                              IsEditable="True"
                              IsEnabled="{Binding Path=ReasonProcessEnabled}"
                              IsReadOnly="False"
                              ItemsSource="{Binding Path=ReasonCodes,
                                                    Mode=TwoWay,
                                                    UpdateSourceTrigger=PropertyChanged}"
                              SelectedValue="{Binding Path=Reason,
                                                      ValidatesOnDataErrors=True}"
                              SelectedValuePath="code"
                              ToolTipService.ShowOnDisabled="True" />
                    <CheckBox Name="CheckBoxCopyReason"
                              Grid.Row="0"
                              Grid.Column="2"
                              Margin="0,0,0,4"
                              HorizontalAlignment="Right"
                              VerticalAlignment="Center"
                              IsChecked="{Binding Path=CopySwitches.CopyReason,
                                                  Mode=TwoWay,
                                                  UpdateSourceTrigger=PropertyChanged}"
                              IsEnabled="{Binding Path=ProcessEnabled,
                                                  Mode=OneWay}" />

                    <Label Name="LabelProcess"
                           Grid.Row="0"
                           Grid.Column="3"
                           Margin="8,0,8,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        Process
                    </Label>
                    <ComboBox Name="ComboBoxProcess"
                              Grid.Row="0"
                              Grid.Column="4"
                              Margin="8,0,8,4"
                              VerticalAlignment="Center"
                              DisplayMemberPath="description"
                              IsEditable="True"
                              IsEnabled="{Binding Path=ReasonProcessEnabled}"
                              IsReadOnly="False"
                              ItemsSource="{Binding Path=ProcessCodes,
                                                    Mode=TwoWay,
                                                    UpdateSourceTrigger=PropertyChanged}"
                              SelectedValue="{Binding Path=Process,
                                                      ValidatesOnDataErrors=True}"
                              SelectedValuePath="code"
                              ToolTipService.ShowOnDisabled="True" />
                    <CheckBox Name="CheckBoxCopyProcess"
                              Grid.Row="0"
                              Grid.Column="5"
                              Margin="0,0,0,4"
                              HorizontalAlignment="Right"
                              VerticalAlignment="Center"
                              IsChecked="{Binding Path=CopySwitches.CopyProcess,
                                                  Mode=TwoWay,
                                                  UpdateSourceTrigger=PropertyChanged}"
                              IsEnabled="{Binding Path=ProcessEnabled,
                                                  Mode=OneWay}" />
                </Grid>
            </GroupBox>

            <!--  TabControlData  -->
            <TabControl Name="TabControlData"
                        Grid.Row="2"
                        Grid.RowSpan="2"
                        Grid.Column="0"
                        Margin="0,4,0,0"
                        IsEnabled="{Binding Path=TabControlDataEnabled}">
                <!--  TabItemIhs  -->
                <TabItem Name="TabItemIhs" IsEnabled="{Binding Path=TabItemIhsEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label Name="IhsTabLabel"
                                   Margin="4,2,4,4"
                                   VerticalAlignment="Bottom"
                                   Content="{Binding Path=IhsTabLabel,
                                                     ValidatesOnDataErrors=True}"
                                   FontSize="13"
                                   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid Name="GridTabItemIhs">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <!--  GroupBoxIhsCategories  -->
                            <GroupBox Name="GroupBoxIhsCategories"
                                      Grid.Row="0"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="IHS Habitat">
                                <Grid Name="GridCategories" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsCategory"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Category
                                    </Label>
                                    <Grid Name="GridIhsCategories"
                                          Grid.Row="0"
                                          Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <ComboBox Name="ComboBoxIhsCategory"
                                                  Grid.Row="0"
                                                  Grid.Column="0"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="False"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=IhsCategoryCodes,
                                                                        Mode=TwoWay,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=IhsCategory}"
                                                  SelectedValuePath="code"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <Label Name="LabelNvcCategory"
                                               Grid.Row="0"
                                               Grid.Column="1"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center">
                                            NVC
                                        </Label>
                                        <ComboBox Name="ComboBoxNvcCategory"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  IsEditable="False"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=NvcCategoryCodes,
                                                                        Mode=TwoWay,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=NvcCategory}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                    </Grid>

                                    <Label Name="LabelIhsHabitat"
                                           Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Habitat
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsHabitat"
                                              Grid.Row="1"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsHabitatListEnabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsHabitatCodes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsHabitat,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsHabitat"
                                              Grid.Row="1"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsHabitat,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelNvcCodes"
                                           Grid.Row="2"
                                           Grid.Column="0"
                                           Margin="0,0,0,0"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        NVC Codes
                                    </Label>
                                    <TextBox Name="TextBoxNvcCodes"
                                             Grid.Row="2"
                                             Grid.Column="1"
                                             Margin="8,0,8,4"
                                             VerticalAlignment="Center"
                                             IsEnabled="False"
                                             Text="{Binding Path=NvcCodes,
                                                            Mode=OneWay}" />
                                </Grid>
                            </GroupBox>

                            <!--  GroupBoxIhsMatrix  -->
                            <GroupBox Name="GroupBoxIhsMatrix"
                                      Grid.Row="1"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="IHS Matrix">
                                <Grid Name="GridIhsMatrix" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsMatrix1"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Matrix 1
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsMatrix1"
                                              Grid.Row="0"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              DropDownClosed="ComboBox_DropDownClosed"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsMatrix1Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsMatrix1Codes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsMatrix1,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsMatrix1"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsMatrix1,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=IhsMatrix1Enabled,
                                                                  Mode=OneWay}" />

                                    <Label Name="LabelIhsMatrix2"
                                           Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Matrix 2
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsMatrix2"
                                              Grid.Row="1"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              DropDownClosed="ComboBox_DropDownClosed"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsMatrix2Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsMatrix2Codes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsMatrix2,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsMatrix2"
                                              Grid.Row="1"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsMatrix2,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=IhsMatrix2Enabled,
                                                                  Mode=OneWay}" />

                                    <Label Name="LabelIhsMatrix3"
                                           Grid.Row="2"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Matrix 3
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsMatrix3"
                                              Grid.Row="2"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              DropDownClosed="ComboBox_DropDownClosed"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsMatrix3Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsMatrix3Codes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsMatrix3,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsMatrix3"
                                              Grid.Row="2"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsMatrix3,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=IhsMatrix3Enabled,
                                                                  Mode=OneWay}" />
                                </Grid>
                            </GroupBox>

                            <!--  GroupBoxIhsFormation  -->
                            <GroupBox Name="GroupBoxIhsFormation"
                                      Grid.Row="2"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="IHS Formation">
                                <Grid Name="GridIhsFormation" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsFormation1"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Formation 1
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsFormation1"
                                              Grid.Row="0"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              DropDownClosed="ComboBox_DropDownClosed"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsFormation1Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsFormation1Codes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsFormation1,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsFormation1"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsFormation1,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=IhsFormation1Enabled,
                                                                  Mode=OneWay}" />

                                    <Label Name="LabelIhsFormation2"
                                           Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Formation 2
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsFormation2"
                                              Grid.Row="1"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              DropDownClosed="ComboBox_DropDownClosed"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsFormation2Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsFormation2Codes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsFormation2,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsFormation2"
                                              Grid.Row="1"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsFormation2,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=IhsFormation2Enabled,
                                                                  Mode=OneWay}" />
                                </Grid>
                            </GroupBox>

                            <!--  GroupBoxIhsManagement  -->
                            <GroupBox Name="GroupBoxIhsManagement"
                                      Grid.Row="3"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="IHS Management">
                                <Grid Name="GridIhsManagement" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsManagement1"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Management 1
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsManagement1"
                                              Grid.Row="0"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              DropDownClosed="ComboBox_DropDownClosed"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsManagement1Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsManagement1Codes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              Padding="4,3"
                                              SelectedValue="{Binding Path=IncidIhsManagement1,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsManagement1"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsManagement1,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=IhsManagement1Enabled,
                                                                  Mode=OneWay}" />

                                    <Label Name="LabelIhsManagement2"
                                           Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Management 2
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsManagement2"
                                              Grid.Row="1"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              DropDownClosed="ComboBox_DropDownClosed"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsManagement2Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsManagement2Codes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsManagement2,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsManagement2"
                                              Grid.Row="1"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsManagement2,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=IhsManagement2Enabled,
                                                                  Mode=OneWay}" />
                                </Grid>
                            </GroupBox>

                            <!--  GroupBoxIhsComplex  -->
                            <GroupBox Name="GroupBoxIhsComplex"
                                      Grid.Row="4"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="IHS Complex">
                                <Grid Name="GridIhsComplex" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsComplex1"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Complex 1
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsComplex1"
                                              Grid.Row="0"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              DropDownClosed="ComboBox_DropDownClosed"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsComplex1Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsComplex1Codes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsComplex1,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsComplex1"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsComplex1,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=IhsComplex1Enabled,
                                                                  Mode=OneWay}" />

                                    <Label Name="LabelIhsComplex2"
                                           Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Complex 2
                                    </Label>
                                    <ComboBox Name="ComboBoxIhsComplex2"
                                              Grid.Row="1"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              DropDownClosed="ComboBox_DropDownClosed"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IhsComplex2Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=IhsComplex2Codes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsComplex2,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIhsComplex2"
                                              Grid.Row="1"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsComplex2,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=IhsComplex2Enabled,
                                                                  Mode=OneWay}" />
                                </Grid>
                            </GroupBox>

                            <!--  GroupBoxIhsSummary  -->
                            <GroupBox Name="GroupBoxIhsSummary"
                                      Grid.Row="5"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="Summary">
                                <Grid Name="GridSummary" Margin="0,4,0,2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80" />
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsSummary"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="0,0,0,0"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        IHS Summary
                                    </Label>
                                    <Grid Name="GridIhsSummary"
                                          Grid.Row="0"
                                          Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TextBox Name="TextBoxIhsSummary"
                                                 Grid.Row="0"
                                                 Grid.Column="0"
                                                 Margin="8,0,8,0"
                                                 VerticalAlignment="Center"
                                                 IsEnabled="False"
                                                 Text="{Binding Path=IncidIhsSummary,
                                                                Mode=OneWay,
                                                                ValidatesOnDataErrors=False}" />
                                        <Label Name="LabelLegacyHabitat"
                                               Grid.Row="0"
                                               Grid.Column="1"
                                               Margin="0,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center">
                                            Legacy Habitat
                                        </Label>
                                        <TextBox Name="TextBoxLegacyHabitat"
                                                 Grid.Row="0"
                                                 Grid.Column="2"
                                                 Margin="8,0,8,0"
                                                 VerticalAlignment="Center"
                                                 IsEnabled="False"
                                                 Text="{Binding Path=IncidLegacyHabitat,
                                                                Mode=OneWay,
                                                                ValidatesOnDataErrors=False}" />
                                    </Grid>
                                </Grid>
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>

                <!--  TabItemDetails  -->
                <TabItem Name="TabItemDetails" IsEnabled="{Binding Path=TabItemDetailsEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label Name="DetailsTabLabel"
                                   Margin="4,2,4,4"
                                   VerticalAlignment="Bottom"
                                   Content="{Binding Path=DetailsTabLabel,
                                                     ValidatesOnDataErrors=True}"
                                   FontSize="13"
                                   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid Name="GridTabItemDetails">
                            <Grid.RowDefinitions>
                                <RowDefinition MinHeight="173" />
                                <!--  Height="140"  -->
                                <RowDefinition MinHeight="173" />
                                <!--  Height="140"  -->
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <!--  "130" />  -->
                                <ColumnDefinition />
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <GroupBox Name="GroupBoxPrimaryBapHabitats"
                                      Grid.Row="0"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="Priority Habitats">
                                <Grid Name="GridBapHabitatsPrimary" Margin="0,10,0,2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <!--  "130" />  -->
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <tkit:DataGrid Name="DataGridPrimaryBapHabitats"
                                                   Grid.Row="0"
                                                   Grid.Column="0"
                                                   Grid.ColumnSpan="2"
                                                   Margin="8,0,8,4"
                                                   AutoGenerateColumns="False"
                                                   BorderBrush="Black"
                                                   BorderThickness="1"
                                                   CanUserAddRows="False"
                                                   CanUserDeleteRows="False"
                                                   CanUserReorderColumns="False"
                                                   CanUserResizeColumns="True"
                                                   CanUserSortColumns="True"
                                                   HeadersVisibility="All"
                                                   IsEnabled="{Binding Path=BapHabitatsAutoEnabled}"
                                                   ItemsSource="{Binding Path=IncidBapHabitatsAuto}"
                                                   Padding="2,0"
                                                   RowDetailsVisibilityMode="Visible"
                                                   RowHeaderWidth="20"
                                                   RowHeight="24">
                                        <tkit:DataGrid.RowValidationRules>
                                            <DataErrorValidationRule />
                                        </tkit:DataGrid.RowValidationRules>
                                        <tkit:DataGrid.Columns>
                                            <tkit:DataGridTextColumn Binding="{Binding bap_id}"
                                                                     Header="bap_id"
                                                                     IsReadOnly="True"
                                                                     Visibility="Collapsed" />
                                            <tkit:DataGridTextColumn Binding="{Binding incid}"
                                                                     Header="INCID"
                                                                     IsReadOnly="True"
                                                                     Visibility="Collapsed" />
                                            <hlu:DataGridComboBoxColumnWithBinding Width="SizeToCells"
                                                                                   MinWidth="125"
                                                                                   CanUserResize="True"
                                                                                   DisplayMemberPath="description"
                                                                                   EditingElementStyle="{StaticResource ComboBoxStyle}"
                                                                                   Header="Priority Habitat"
                                                                                   IsReadOnly="True"
                                                                                   ItemsSource="{Binding DataContext.BapHabitatCodes,
                                                                                                         RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                                                        AncestorType={x:Type Window}},
                                                                                                         IsAsync=true}"
                                                                                   SelectedValueBinding="{Binding bap_habitat,
                                                                                                                  UpdateSourceTrigger=PropertyChanged}"
                                                                                   SelectedValuePath="code" />
                                            <hlu:DataGridComboBoxColumnWithBinding Width="SizeToCells"
                                                                                   MinWidth="125"
                                                                                   CanUserResize="True"
                                                                                   DisplayMemberPath="description"
                                                                                   EditingElementStyle="{StaticResource ComboBoxStyle}"
                                                                                   Header="Determination Quality"
                                                                                   ItemsSource="{Binding DataContext.BapDeterminationQualityCodesAuto,
                                                                                                         RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                                                        AncestorType={x:Type Window}},
                                                                                                         IsAsync=true}"
                                                                                   SelectedValueBinding="{Binding quality_determination,
                                                                                                                  UpdateSourceTrigger=PropertyChanged,
                                                                                                                  ValidatesOnDataErrors=True}"
                                                                                   SelectedValuePath="code" />
                                            <hlu:DataGridComboBoxColumnWithBinding Width="SizeToCells"
                                                                                   MinWidth="125"
                                                                                   CanUserResize="True"
                                                                                   DisplayMemberPath="description"
                                                                                   EditingElementStyle="{StaticResource ComboBoxStyle}"
                                                                                   Header="Interpretation Quality"
                                                                                   ItemsSource="{Binding DataContext.BapInterpretationQualityCodes,
                                                                                                         RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                                                        AncestorType={x:Type Window}},
                                                                                                         IsAsync=true}"
                                                                                   SelectedValueBinding="{Binding quality_interpretation,
                                                                                                                  UpdateSourceTrigger=PropertyChanged,
                                                                                                                  ValidatesOnDataErrors=True}"
                                                                                   SelectedValuePath="code" />
                                            <tkit:DataGridTextColumn Width="SizeToCells"
                                                                     MinWidth="125"
                                                                     Binding="{Binding interpretation_comments,
                                                                                       UpdateSourceTrigger=PropertyChanged,
                                                                                       ValidatesOnDataErrors=True}"
                                                                     CanUserResize="True"
                                                                     EditingElementStyle="{StaticResource TextBoxStyle}"
                                                                     Header="Interpretation Comments" />
                                        </tkit:DataGrid.Columns>
                                        <!--
                                            <tkit:DataGrid.RowDetailsTemplate>
                                            <DataTemplate>
                                            <Grid TextBlock.Foreground="Black">
                                            <Grid.RowDefinitions>
                                            <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="{Binding interpretation_comments}" Grid.Row="0"/>
                                            </Grid>
                                            </DataTemplate>
                                            </tkit:DataGrid.RowDetailsTemplate>
                                        -->
                                    </tkit:DataGrid>
                                </Grid>
                            </GroupBox>

                            <GroupBox Name="GroupBoxSecondaryBapHabitats"
                                      Grid.Row="1"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="Potential Priority Habitats">
                                <Grid Name="GridBapHabitatsUser" Margin="0,10,0,2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <!--  130" />  -->
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <tkit:DataGrid Name="DataGridUserBapHabitats"
                                                   Grid.Row="0"
                                                   Grid.Column="0"
                                                   Grid.ColumnSpan="2"
                                                   Margin="8,0,8,4"
                                                   AutoGenerateColumns="False"
                                                   BorderBrush="Black"
                                                   BorderThickness="1"
                                                   CanUserAddRows="True"
                                                   CanUserDeleteRows="True"
                                                   CanUserReorderColumns="False"
                                                   CanUserResizeColumns="True"
                                                   CanUserSortColumns="True"
                                                   HeadersVisibility="All"
                                                   IsEnabled="{Binding Path=BapHabitatsUserEnabled}"
                                                   ItemsSource="{Binding Path=IncidBapHabitatsUser}"
                                                   Padding="2,0"
                                                   RowDetailsVisibilityMode="Visible"
                                                   RowHeaderWidth="20"
                                                   RowHeight="24">
                                        <tkit:DataGrid.RowValidationRules>
                                            <DataErrorValidationRule />
                                        </tkit:DataGrid.RowValidationRules>
                                        <tkit:DataGrid.Columns>
                                            <tkit:DataGridTextColumn Binding="{Binding bap_id}"
                                                                     Header="bap_id"
                                                                     IsReadOnly="True"
                                                                     Visibility="Collapsed" />
                                            <tkit:DataGridTextColumn Binding="{Binding incid}"
                                                                     Header="INCID"
                                                                     IsReadOnly="True"
                                                                     Visibility="Collapsed" />
                                            <hlu:DataGridComboBoxColumnWithBinding Width="SizeToCells"
                                                                                   MinWidth="125"
                                                                                   CanUserResize="True"
                                                                                   DisplayMemberPath="description"
                                                                                   EditingElementStyle="{StaticResource ComboBoxStyle}"
                                                                                   Header="Priority Habitat"
                                                                                   IsReadOnly="False"
                                                                                   ItemsSource="{Binding DataContext.BapHabitatCodes,
                                                                                                         RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                                                        AncestorType={x:Type Window}},
                                                                                                         IsAsync=true}"
                                                                                   SelectedValueBinding="{Binding bap_habitat,
                                                                                                                  UpdateSourceTrigger=PropertyChanged,
                                                                                                                  ValidatesOnDataErrors=True}"
                                                                                   SelectedValuePath="code" />
                                            <hlu:DataGridComboBoxColumnWithBinding Width="SizeToCells"
                                                                                   MinWidth="125"
                                                                                   CanUserResize="True"
                                                                                   DisplayMemberPath="description"
                                                                                   EditingElementStyle="{StaticResource ComboBoxStyle}"
                                                                                   Header="Determination Quality"
                                                                                   ItemsSource="{Binding DataContext.BapDeterminationQualityCodesUser,
                                                                                                         RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                                                        AncestorType={x:Type Window}},
                                                                                                         IsAsync=true}"
                                                                                   SelectedValueBinding="{Binding quality_determination,
                                                                                                                  UpdateSourceTrigger=PropertyChanged,
                                                                                                                  ValidatesOnDataErrors=True}"
                                                                                   SelectedValuePath="code" />
                                            <hlu:DataGridComboBoxColumnWithBinding Width="SizeToCells"
                                                                                   MinWidth="125"
                                                                                   CanUserResize="True"
                                                                                   DisplayMemberPath="description"
                                                                                   EditingElementStyle="{StaticResource ComboBoxStyle}"
                                                                                   Header="Interpretation Quality"
                                                                                   ItemsSource="{Binding DataContext.BapInterpretationQualityCodes,
                                                                                                         RelativeSource={RelativeSource Mode=FindAncestor,
                                                                                                                                        AncestorType={x:Type Window}},
                                                                                                         IsAsync=true}"
                                                                                   SelectedValueBinding="{Binding quality_interpretation,
                                                                                                                  UpdateSourceTrigger=PropertyChanged,
                                                                                                                  ValidatesOnDataErrors=True}"
                                                                                   SelectedValuePath="code" />
                                            <tkit:DataGridTextColumn Width="SizeToCells"
                                                                     MinWidth="125"
                                                                     Binding="{Binding interpretation_comments,
                                                                                       UpdateSourceTrigger=PropertyChanged,
                                                                                       ValidatesOnDataErrors=True}"
                                                                     CanUserResize="True"
                                                                     EditingElementStyle="{StaticResource TextBoxStyle}"
                                                                     Header="Interpretation Comments" />
                                        </tkit:DataGrid.Columns>
                                        <!--
                                            <tkit:DataGrid.RowDetailsTemplate>
                                            <DataTemplate>
                                            <Grid TextBlock.Foreground="Black">
                                            <Grid.RowDefinitions>
                                            <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="{Binding interpretation_comments}" Grid.Row="0"/>
                                            </Grid>
                                            </DataTemplate>
                                            </tkit:DataGrid.RowDetailsTemplate>
                                        -->
                                    </tkit:DataGrid>
                                    <CheckBox Name="CheckBoxCopyBapHabitatUser"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidBapHabitatsUser,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding Path=BapHabitatsUserEnabled}" />
                                </Grid>
                            </GroupBox>

                            <!--  GroupBoxGeneralComments  -->
                            <GroupBox Name="GroupBoxGeneralComments"
                                      Grid.Row="2"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="General Comments">
                                <Grid Name="GridGeneralComments" Margin="0,10,0,2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition MaxHeight="40" />
                                        <!--  Height="40"  -->
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <!--  130" />  -->
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <TextBox Name="TextBoxIncidGeneralComments"
                                             Grid.Row="0"
                                             Grid.Column="0"
                                             Grid.ColumnSpan="2"
                                             Margin="8,0,8,4"
                                             BorderThickness="1"
                                             MaxLength="254"
                                             Text="{Binding Path=IncidGeneralComments,
                                                            Mode=TwoWay,
                                                            UpdateSourceTrigger=PropertyChanged,
                                                            ValidatesOnDataErrors=True}"
                                             TextWrapping="Wrap"
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyGeneralComments"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidGeneralComments,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />
                                </Grid>
                            </GroupBox>

                            <!--  GroupBoxMaps  -->
                            <GroupBox Name="GroupBoxMaps"
                                      Grid.Row="3"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      Header="Maps">
                                <Grid Name="GridMaps" Margin="0,8,0,4">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <!--  "130" />  -->
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Grid Name="DetailsMaps"
                                          Grid.Row="0"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="2">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="90" />
                                            <ColumnDefinition Width="Auto" MinWidth="100" />
                                            <ColumnDefinition Width="20" />
                                            <ColumnDefinition Width="Auto" MinWidth="100" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <Label Name="LabelBoundaryBaseMap"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="8,0,8,4"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center">
                                            Boundary Map
                                        </Label>
                                        <ComboBox Name="ComboBoxIncidBoundaryBaseMap"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="False"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=BoundaryMapCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=IncidBoundaryBaseMap,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox Name="CheckBoxCopyBoundaryBaseMap"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding Path=CopySwitches.CopyIncidBoundaryBaseMap,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                        <Label Name="LabelDigitisationBaseMap"
                                               Grid.Row="0"
                                               Grid.Column="3"
                                               Margin="8,0,8,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center">
                                            Digitisation Map
                                        </Label>
                                        <ComboBox Name="ComboBoxIncidDigitisationBaseMap"
                                                  Grid.Row="0"
                                                  Grid.Column="4"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="False"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=BoundaryMapCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=IncidDigitisationBaseMap,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                    <CheckBox Name="CheckBoxCopyDigitisationBaseMap"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidDigitisationBaseMap,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />
                                </Grid>
                            </GroupBox>

                            <!--  GroupBoxBiosite  -->
                            <GroupBox Name="GroupBoxBiosite"
                                      Grid.Row="4"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      VerticalAlignment="Stretch"
                                      Header="Biosite">
                                <Grid Name="GridBiosite" Margin="0,10,0,4">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" MinWidth="90" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelBiositeName"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="8,0,8,4"
                                           HorizontalAlignment="Left"
                                           VerticalAlignment="Center">
                                        Biosite Name
                                    </Label>
                                    <TextBox Name="TextBoxBiositeName"
                                             Grid.Row="0"
                                             Grid.Column="1"
                                             Grid.ColumnSpan="1"
                                             Margin="8,0,8,4"
                                             BorderThickness="1"
                                             MaxLength="100"
                                             Text="{Binding Path=IncidSiteName,
                                                            Mode=TwoWay,
                                                            UpdateSourceTrigger=PropertyChanged,
                                                            ValidatesOnDataErrors=True}"
                                             TextWrapping="Wrap"
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSiteName"
                                              Grid.Row="0"
                                              Grid.Column="3"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSiteName,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />
                                </Grid>
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>

                <!--  TabItemSources  -->
                <TabItem Name="TabItemSources" IsEnabled="{Binding Path=TabItemSourcesEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label Name="SourcesTabLabel"
                                   Margin="4,2,4,4"
                                   VerticalAlignment="Bottom"
                                   Content="{Binding Path=SourcesTabLabel,
                                                     ValidatesOnDataErrors=True}"
                                   FontSize="13"
                                   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid Name="GridTabItemSources">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <!--  MinHeight="167"  -->
                                <RowDefinition Height="Auto" />
                                <!--  MinHeight="167"  -->
                                <RowDefinition Height="Auto" />
                                <!--  MinHeight="167"  -->
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <GroupBox Name="GroupBoxSource1"
                                      Grid.Row="0"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      Header="Source 1">
                                <Grid Name="GridSource1" Margin="0,11,0,11">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIncidSource1Name"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="4,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Name
                                    </Label>
                                    <ComboBox Name="ComboBoxIncidSource1Name"
                                              Grid.Row="0"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="source_name"
                                              IsEditable="False"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source1Names,
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidSource1Id,
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="source_id"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource1Name"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1Id,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource1Date"
                                           Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Vague Date
                                    </Label>
                                    <TextBox Name="TextBoxIncidSource1Date"
                                             Grid.Row="1"
                                             Grid.Column="1"
                                             Margin="8,0,8,4"
                                             VerticalAlignment="Center"
                                             BorderThickness="1"
                                             IsEnabled="{Binding Path=IncidSource1Enabled,
                                                                 Mode=OneWay}"
                                             Text="{Binding Path=IncidSource1Date,
                                                            Converter={StaticResource vagueDateConverter},
                                                            ConverterParameter='source_date_start^source_date_end^source_date_type',
                                                            Mode=TwoWay,
                                                            UpdateSourceTrigger=PropertyChanged,
                                                            ValidatesOnDataErrors=True}"
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource1Date"
                                              Grid.Row="1"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1Date,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource1HabitatClass"
                                           Grid.Row="2"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Habitat Class
                                    </Label>
                                    <ComboBox Name="ComboBoxIncidSource1HabitatClass"
                                              Grid.Row="2"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IncidSource1Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=SourceHabitatClassCodes,
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidSource1HabitatClass,
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource1HabitatClass"
                                              Grid.Row="2"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1HabitatClass,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource1HabitatType"
                                           Grid.Row="3"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Habitat Type
                                    </Label>

                                    <ComboBox Name="ComboBoxIncidSource1HabitatType"
                                              Grid.Row="3"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              IsEditable="True"
                                              IsEnabled="{Binding Path=IncidSource1Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source1HabitatTypeCodes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              KeyUp="EditableComboBox_KeyUp"
                                              SelectedValue="{Binding Path=IncidSource1HabitatType,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource1HabitatType"
                                              Grid.Row="3"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1HabitatType,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource1BoundaryImportance"
                                           Grid.Row="4"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Boundary Imp.
                                    </Label>
                                    <Grid Name="GridSource1Importance"
                                          Grid.Row="4"
                                          Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="20" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <ComboBox Name="ComboBoxIncidSource1BoundaryImportance"
                                                  Grid.Row="0"
                                                  Grid.Column="0"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="False"
                                                  IsEnabled="{Binding Path=IncidSource1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=IncidSource1BoundaryImportance,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox Name="CheckBoxCopySource1BoundaryImportance"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding Path=CopySwitches.CopyIncidSource1BoundaryImportance,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                        <Label Name="LabelIncidSource1HabitatImportance"
                                               Grid.Row="0"
                                               Grid.Column="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center">
                                            Habitat Imp.
                                        </Label>
                                        <ComboBox Name="ComboBoxIncidSource1HabitatImportance"
                                                  Grid.Row="3"
                                                  Grid.Column="3"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="False"
                                                  IsEnabled="{Binding Path=IncidSource1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=IncidSource1HabitatImportance,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                    <CheckBox Name="CheckBoxCopySource1HabitatImportance"
                                              Grid.Row="4"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1HabitatImportance,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />
                                </Grid>
                            </GroupBox>

                            <GroupBox Name="GroupBoxSource2"
                                      Grid.Row="1"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      Header="Source 2">
                                <Grid Name="GridSource2" Margin="0,11,0,11">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIncidSource2Name"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="4,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Name
                                    </Label>
                                    <ComboBox Name="ComboBoxIncidSource2Name"
                                              Grid.Row="0"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="source_name"
                                              IsEditable="False"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source2Names,
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidSource2Id,
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="source_id"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource2Name"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2Id,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource2Date"
                                           Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Vague Date
                                    </Label>
                                    <TextBox Name="TextBoxIncidSource2Date"
                                             Grid.Row="1"
                                             Grid.Column="1"
                                             Margin="8,0,8,4"
                                             VerticalAlignment="Center"
                                             BorderThickness="1"
                                             IsEnabled="{Binding Path=IncidSource2Enabled,
                                                                 Mode=OneWay}"
                                             Text="{Binding Path=IncidSource2Date,
                                                            Converter={StaticResource vagueDateConverter},
                                                            ConverterParameter='source_date_start^source_date_end^source_date_type',
                                                            Mode=TwoWay,
                                                            UpdateSourceTrigger=PropertyChanged,
                                                            ValidatesOnDataErrors=True}"
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource2Date"
                                              Grid.Row="1"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2Date,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource2HabitatClass"
                                           Grid.Row="2"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Habitat Class
                                    </Label>
                                    <ComboBox Name="ComboBoxIncidSource2HabitatClass"
                                              Grid.Row="2"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IncidSource2Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=SourceHabitatClassCodes,
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidSource2HabitatClass,
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource2HabitatClass"
                                              Grid.Row="2"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2HabitatClass,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource2HabitatType"
                                           Grid.Row="3"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Habitat Type
                                    </Label>
                                    <ComboBox Name="ComboBoxIncidSource2HabitatType"
                                              Grid.Row="3"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Top"
                                              DisplayMemberPath="description"
                                              IsEditable="True"
                                              IsEnabled="{Binding Path=IncidSource2Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source2HabitatTypeCodes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              KeyUp="EditableComboBox_KeyUp"
                                              SelectedValue="{Binding Path=IncidSource2HabitatType,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource2HabitatType"
                                              Grid.Row="3"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2HabitatType,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource2BoundaryImportance"
                                           Grid.Row="4"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Boundary Imp.
                                    </Label>
                                    <Grid Name="GridSource2Importance"
                                          Grid.Row="4"
                                          Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="20" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <ComboBox Name="ComboBoxIncidSource2BoundaryImportance"
                                                  Grid.Row="0"
                                                  Grid.Column="0"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="False"
                                                  IsEnabled="{Binding Path=IncidSource2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=IncidSource2BoundaryImportance,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox Name="CheckBoxCopySource2BoundaryImportance"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding Path=CopySwitches.CopyIncidSource2BoundaryImportance,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                        <Label Name="LabelIncidSource2HabitatImportance"
                                               Grid.Row="0"
                                               Grid.Column="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center">
                                            Habitat Imp.
                                        </Label>
                                        <ComboBox Name="ComboBoxIncidSource2HabitatImportance"
                                                  Grid.Row="3"
                                                  Grid.Column="3"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="False"
                                                  IsEnabled="{Binding Path=IncidSource2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=IncidSource2HabitatImportance,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                    <CheckBox Name="CheckBoxCopySource2HabitatImportance"
                                              Grid.Row="4"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2HabitatImportance,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />
                                </Grid>
                            </GroupBox>

                            <GroupBox Name="GroupBoxSource3"
                                      Grid.Row="2"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      Header="Source 3">
                                <Grid Name="GridSource3" Margin="0,11,0,11">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIncidSource3Name"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="4,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Name
                                    </Label>
                                    <ComboBox Name="ComboBoxIncidSource3Name"
                                              Grid.Row="0"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="source_name"
                                              IsEditable="False"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source3Names,
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidSource3Id,
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="source_id"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource3Name"
                                              Grid.Row="0"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3Id,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource3Date"
                                           Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Vague Date
                                    </Label>
                                    <TextBox Name="TextBoxIncidSource3Date"
                                             Grid.Row="1"
                                             Grid.Column="1"
                                             Margin="8,0,8,4"
                                             VerticalAlignment="Center"
                                             BorderThickness="1"
                                             IsEnabled="{Binding Path=IncidSource3Enabled,
                                                                 Mode=OneWay}"
                                             Text="{Binding Path=IncidSource3Date,
                                                            Converter={StaticResource vagueDateConverter},
                                                            ConverterParameter='source_date_start^source_date_end^source_date_type',
                                                            Mode=TwoWay,
                                                            UpdateSourceTrigger=PropertyChanged,
                                                            ValidatesOnDataErrors=True}"
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource3Date"
                                              Grid.Row="1"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3Date,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource3HabitatClass"
                                           Grid.Row="2"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Habitat Class
                                    </Label>
                                    <ComboBox Name="ComboBoxIncidSource3HabitatClass"
                                              Grid.Row="2"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              IsEditable="False"
                                              IsEnabled="{Binding Path=IncidSource3Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=SourceHabitatClassCodes,
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidSource3HabitatClass,
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource3HabitatClass"
                                              Grid.Row="2"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3HabitatClass,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource3HabitatType"
                                           Grid.Row="3"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Habitat Type
                                    </Label>
                                    <ComboBox Name="ComboBoxIncidSource3HabitatType"
                                              Grid.Row="3"
                                              Grid.Column="1"
                                              Margin="8,0,8,4"
                                              VerticalAlignment="Center"
                                              DisplayMemberPath="description"
                                              IsEditable="True"
                                              IsEnabled="{Binding Path=IncidSource3Enabled,
                                                                  Mode=OneWay}"
                                              IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source3HabitatTypeCodes,
                                                                    Converter={StaticResource codeDescriptionConverter},
                                                                    ConverterParameter='code^description^sort_order',
                                                                    UpdateSourceTrigger=PropertyChanged}"
                                              KeyUp="EditableComboBox_KeyUp"
                                              SelectedValue="{Binding Path=IncidSource3HabitatType,
                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                      ConverterParameter='code^description^sort_order',
                                                                      ValidatesOnDataErrors=True}"
                                              SelectedValuePath="code"
                                              ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource3HabitatType"
                                              Grid.Row="3"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3HabitatType,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />

                                    <Label Name="LabelIncidSource3BoundaryImportance"
                                           Grid.Row="4"
                                           Grid.Column="0"
                                           Margin="0,0,0,4"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center">
                                        Boundary Imp.
                                    </Label>
                                    <Grid Name="GridSource3Importance"
                                          Grid.Row="4"
                                          Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="20" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <ComboBox Name="ComboBoxIncidSource3BoundaryImportance"
                                                  Grid.Row="0"
                                                  Grid.Column="0"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="False"
                                                  IsEnabled="{Binding Path=IncidSource3Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=IncidSource3BoundaryImportance,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code" />
                                        <CheckBox Name="CheckBoxCopySource3BoundaryImportance"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding Path=CopySwitches.CopyIncidSource3BoundaryImportance,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label Name="LabelIncidSource3HabitatImportance"
                                               Grid.Row="0"
                                               Grid.Column="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center">
                                            Habitat Imp.
                                        </Label>
                                        <ComboBox Name="ComboBoxIncidSource3HabitatImportance"
                                                  Grid.Row="3"
                                                  Grid.Column="3"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="False"
                                                  IsEnabled="{Binding Path=IncidSource3Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding Path=IncidSource3HabitatImportance,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code" />
                                    </Grid>
                                    <CheckBox Name="CheckBoxCopySource3HabitatImportance"
                                              Grid.Row="4"
                                              Grid.Column="2"
                                              Margin="0,0,0,4"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3HabitatImportance,
                                                                  Mode=TwoWay,
                                                                  UpdateSourceTrigger=PropertyChanged}" />
                                </Grid>
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>

                <!--  TabItemHistory  -->
                <TabItem Name="TabItemHistory" IsEnabled="{Binding Path=TabItemHistoryEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label Margin="4,2,4,4"
                                   VerticalAlignment="Bottom"
                                   FontSize="13">
                                History
                            </Label>
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid Name="GridTabItemHistory">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"
                                               MinHeight="550"
                                               MaxHeight="550" />
                                <!--  Height="350*"  -->
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <GroupBox Name="GroupBoxModificationHistory"
                                      Grid.Row="0"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3"
                                      Header="Modification History">
                                <ItemsControl Name="ItemsControlModificationHistory"
                                              Grid.Row="0"
                                              Margin="8,8,8,8"
                                              Background="#FFD6D6D6"
                                              BorderBrush="Black"
                                              BorderThickness="2"
                                              Foreground="Black"
                                              ItemsSource="{Binding Path=IncidHistory,
                                                                    Mode=OneWay,
                                                                    UpdateSourceTrigger=PropertyChanged}" />
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>
            </TabControl>

            <!--  DockPanelGetMapSelection  -->
            <DockPanel Name="DockPanelGetMapSelection"
                       Grid.Row="2"
                       Grid.RowSpan="2"
                       Grid.Column="0"
                       MaxHeight="35"
                       Margin="0,4,0,0"
                       VerticalAlignment="Top"
                       Panel.ZIndex="5">
                <Grid Name="GridStatusTop" Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Label Name="LabelStatusTop"
                           Grid.Column="0"
                           Margin="2,7,36,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        <TextBlock Name="TextBlockStatusTop" Text="{Binding Path=StatusTop}">
                            <TextBlock.Triggers>
                                <EventTrigger RoutedEvent="TextBlock.Loaded">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation AutoReverse="True"
                                                             Duration="0:0:5"
                                                             From="1.0"
                                                             RepeatBehavior="Forever"
                                                             Storyboard.TargetName="TextBlockStatusTop"
                                                             Storyboard.TargetProperty="(TextBlock.Opacity)"
                                                             To="1.0" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </TextBlock.Triggers>
                        </TextBlock>
                    </Label>
                </Grid>
            </DockPanel>

            <!--  ButtonGetMapSelection2  -->
            <Button Name="ButtonGetMapSelection2"
                    Grid.Row="3"
                    Width="20"
                    MaxHeight="20"
                    Margin="0,5,8,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Command="{Binding Path=ReadMapSelectionCommand}"
                    IsEnabled="{Binding Path=CanReadMapSelection}"
                    MouseEnter="ButtonGetMapSelection2_MouseEnter"
                    MouseLeave="ButtonGetMapSelection2_MouseLeave"
                    ToolTip="Get Map Selection"
                    ToolTipService.ShowOnDisabled="True">
                <Image Name="Normal"
                       Width="16"
                       Height="16"
                       Source="..\..\Icons\ReadMapSelection.png" />
            </Button>

            <!--  GridNavigation  -->
            <Grid Name="GridStatus"
                  Grid.Row="4"
                  Margin="0,4,0,0"
                  IsEnabled="{Binding Path=WindowEnabled}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Grid Name="GridBulkUpdate"
                      Grid.Column="0"
                      Height="23"
                      VerticalAlignment="Bottom"
                      Visibility="{Binding Path=ShowInBulkUpdateMode,
                                           Converter={StaticResource bool2VisibilityConverter},
                                           Mode=TwoWay}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Label Name="LabelBulkUpdate"
                           Margin="0,0,8,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Bulk Update. Affected:"
                           FontStretch="UltraExpanded"
                           FontWeight="Bold" />
                </Grid>

                <Grid Name="GridNavigation"
                      Grid.Column="0"
                      Height="23"
                      VerticalAlignment="Bottom"
                      Visibility="{Binding Path=HideInBulkUpdateMode,
                                           Converter={StaticResource bool2VisibilityConverter},
                                           Mode=TwoWay}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="40" />
                        <ColumnDefinition Width="25" />
                        <ColumnDefinition Width="25" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="25" />
                        <ColumnDefinition Width="25" />
                    </Grid.ColumnDefinitions>
                    <Label Name="LabelNavigation"
                           Grid.Column="0"
                           Margin="0,0,4,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        INCID:
                    </Label>
                    <Button Name="ButtonFirstRecord"
                            Grid.Column="1"
                            Margin="0,0,1,0"
                            Command="{Binding Path=NavigateFirstCommand}">
                        |&lt;
                    </Button>
                    <Button Name="ButtonPreviousRecord"
                            Grid.Column="2"
                            Margin="0,0,1,0"
                            Command="{Binding Path=NavigatePreviousCommand}">
                        &lt;
                    </Button>
                    <TextBox Name="TextBoxRecordNumber"
                             Grid.Column="3"
                             Text="{Binding Path=IncidCurrentRowIndex,
                                            Mode=TwoWay,
                                            ValidatesOnDataErrors=True}"
                             TextAlignment="Center" />
                    <Button Name="ButtonNextRecord"
                            Grid.Column="4"
                            Margin="1,0,0,0"
                            Command="{Binding Path=NavigateNextCommand}">
                        &gt;
                    </Button>
                    <Button Name="ButtonLastRecord"
                            Grid.Column="5"
                            Margin="1,0,0,0"
                            Command="{Binding Path=NavigateLastCommand}">
                        &gt;|
                    </Button>
                </Grid>

                <Grid Name="GridLabelStatusIncid"
                      Grid.Column="1"
                      Height="23"
                      VerticalAlignment="Bottom">
                    <Label Name="LabelStatusIncid"
                           Grid.Column="0"
                           Margin="8,0,4,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center"
                           Content="{Binding Path=StatusIncid,
                                             UpdateSourceTrigger=PropertyChanged}"
                           MouseDoubleClick="LabelStatusIncid_MouseDoubleClick"
                           ToolTip="{Binding Path=StatusIncidToolTip,
                                             UpdateSourceTrigger=PropertyChanged}" />
                </Grid>

                <Grid Name="GridCommandButtons"
                      Grid.Column="2"
                      Height="23"
                      HorizontalAlignment="Right"
                      VerticalAlignment="Bottom">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="60" />
                    </Grid.ColumnDefinitions>

                    <Button Name="ButtonCancelBulkUpdate"
                            Grid.Column="1"
                            Margin="2,0,2,0"
                            Command="{Binding Path=CancelBulkUpdateCommand}"
                            Visibility="{Binding Path=ShowInBulkUpdateMode,
                                                 Converter={StaticResource bool2VisibilityConverter}}">
                        _Cancel
                    </Button>
                    <Button Name="ButtonUpdate"
                            Grid.Column="2"
                            Margin="2,0,0,0"
                            Background="Red"
                            Command="{Binding Path=UpdateCommand}"
                            Foreground="White"
                            IsEnabled="{Binding Path=CanUpdate}">
                        Appl_y
                    </Button>
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
