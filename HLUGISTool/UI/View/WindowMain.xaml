<Window x:Class="HLU.WindowMain"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:tkit="http://schemas.microsoft.com/wpf/2008/toolkit"
    xmlns:hlu="clr-namespace:HLU.UI.UserControls;assembly="
    Title="{Binding Path=WindowTitle}" Height="760" Width="500" WindowStyle="SingleBorderWindow" SizeToContent="Height" 
        Icon="..\..\Icons\HLUIcon.png"
        Topmost="{Binding ElementName=MenuItemAppKeepOnTop, Path=IsChecked}"
        Loaded="Window_Loaded" KeyUp="Window_KeyUp">
    
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Dictionary\CodeDescriptionConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\VagueDateConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\Bool2VisibilityConverterDictionary.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    
    <DockPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0,0,0,0" Width="Auto" 
               Cursor="{Binding Path=WindowCursor}">
 
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Name="MenuItemExport" Header="Ex_port" 
                          Command="{Binding Path=ExportCommand}" IsEnabled="{Binding Path=CanExport}" />
                <MenuItem Name="MenuItemExit" Header="E_xit" 
                          Command="{Binding Path=CloseCommand}" />
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Name="MenuItemEdit" Header="_Copy" 
                          Command="{Binding Path=CopyCommand}" IsEnabled="{Binding Path=CanCopy}" />
                <MenuItem Name="MenuItemPaste" Header="Paste" 
                          Command="{Binding Path=PasteCommand}" IsEnabled="{Binding Path=CanPaste}" />
                <MenuItem Name="MenuItemBulkUpdate" Header="{Binding Path=BulkUpdateCommandHeader}" 
                          Command="{Binding Path=BulkUpdateCommandMenu}" IsEnabled="{Binding Path=CanBulkUpdate}" />
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem Name="MenuItemGisMaximise" Header="_Maximise GIS Window" 
                          Command="{Binding Path=GisWinMaximiseCommand}" IsEnabled="{Binding Path=CanGisWinMaximise}" />
                <MenuItem Name="MenuItemGisSideBySide" Header="Windows _Side By Side" 
                          Command="{Binding Path=GisWinSideBySideCommand}" IsEnabled="{Binding Path=CanGisWinSideBySide}" />
                <MenuItem Name="MenuItemAppKeepOnTop" Header="_Keep DB Window on Top" IsCheckable="True" />


                <MenuItem Name="MenuItemGisSwitchTo" Header="S_witch To GIS Window" 
                          Command="{Binding Path=GisWinSwitchToCommand}" IsEnabled="{Binding Path=CanGisWinSwitchTo}" />
                <MenuItem Name="MenuItemZoomSelected" Header="_Zoom To Selection" 
                          Command="{Binding Path=ZoomSelectionCommand}" IsEnabled="{Binding Path=CanZoomSelection}" />
            </MenuItem>
            <MenuItem Header="_Select">
                <MenuItem Name="MenuItemSelectByAttributes" Header="Select by _Attributes" 
                          Command="{Binding Path=SelectByAttributesCommand}" IsEnabled="{Binding Path=CanSelectByAttributes}" />
                <MenuItem Name="MenuItemClearFilter" Header="_Clear Filter" 
                          Command="{Binding Path=ClearFilterCommand}" IsEnabled="{Binding Path=IsFiltered}" />
                <MenuItem Name="MenuItemSelectOnMap" Header="Select C_urrent INCID on Map" 
                          Command="{Binding Path=SelectOnMapCommand}" IsEnabled="{Binding Path=CanSelectOnMap}" />
                <MenuItem Name="MenuItemGetMapSelection" Header="Get _Map Selection" 
                          Command="{Binding Path=ReadMapSelectionCommand}" IsEnabled="{Binding Path=CanReadMapSelection}" />
                <MenuItem Name="MenuItemSelectByIncid" Header="Select by _INCID" 
                          Command="{Binding Path=SelectByIncidCommand}" IsEnabled="{Binding Path=CanSelectByIncid}" />
            </MenuItem>
            <MenuItem Header="Split/_Merge">
                <MenuItem Name="MenuItemSplit" Header="_Split Features" 
                          Command="{Binding Path=SplitCommand}" IsEnabled="{Binding Path=CanSplit}" />
                <MenuItem Name="MenuItemMerge" Header="_Merge Features" 
                          Command="{Binding Path=MergeCommand}" IsEnabled="{Binding Path=CanMerge}" />
            </MenuItem>
            <MenuItem Header="_Tools">
                <MenuItem Name="MenuItemOptions" Header="_Options" Command="{Binding Path=OptionsCommand}" />
                <MenuItem Name="MenuItemAbout" Header="_About" Command="{Binding Path=AboutCommand}" />
            </MenuItem>
        </Menu>

        <ToolBarTray Name="ToolBarTrayMain" DockPanel.Dock="Top">
            <ToolBar Name="ToolBarMain" Band="1" BandIndex="1">
                <Button Name="ButtonExit" ToolTip="Exit" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=CloseCommand}">
                    <Image Source="..\..\Icons\FileExit.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonExport" ToolTip="Export" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=ExportCommand}" IsEnabled="{Binding Path=CanExport}">
                    <Image Source="..\..\Icons\FileExport.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonOptions" ToolTip="Options" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=OptionsCommand}">
                    <Image Source="..\..\Icons\Options.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonCopy" ToolTip="Copy" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=CopyCommand}" IsEnabled="{Binding Path=CanCopy}">
                    <Image Source="..\..\Icons\EditCopy.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonPaste" ToolTip="Paste" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=PasteCommand}" IsEnabled="{Binding Path=CanPaste}">
                    <Image Source="..\..\Icons\EditPaste.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonBulkUpdate" ToolTip="Bulk Update" ToolTipService.ShowOnDisabled="True" 
                    Command="{Binding Path=BulkUpdateCommand}" IsEnabled="{Binding Path=CanBulkUpdate}">
                    <Image Source="..\..\Icons\EditBulkUpdate.png" Width="16" Height="16" />
                </Button>
            </ToolBar>
            <ToolBar Name="ToolBarView" Band="1" BandIndex="2">
                <Button Name="ButtonGisMaximise" ToolTip="Maximise GIS Window" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=GisWinMaximiseCommand}" IsEnabled="{Binding Path=CanGisWinMaximise}">
                    <Image Source="..\..\Icons\GisWinMaximise.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonGisSideBySide" ToolTip="Windows Side By Side" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=GisWinSideBySideCommand}" IsEnabled="{Binding Path=CanGisWinSideBySide}">
                    <Image Source="..\..\Icons\GisWinSideBySide.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonGisSwitchTo" ToolTip="Switch To GIS Window" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=GisWinSwitchToCommand}" IsEnabled="{Binding Path=CanGisWinSwitchTo}">
                    <Image Source="..\..\Icons\GisWinSwitchTo.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonZoomSelected" ToolTip="Zoom to Selection" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=ZoomSelectionCommand}" IsEnabled="{Binding Path=CanZoomSelection}">
                    <Image Source="..\..\Icons\ZoomSelection.png" Width="16" Height="16" />
                </Button>
            </ToolBar>
            <ToolBar Name="ToolBarSelect" Band="1" BandIndex="3">
                <Button Name="ButtonSelectByAttributes" ToolTip="Select by Attributes" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=SelectByAttributesCommand}" IsEnabled="{Binding Path=CanSelectByAttributes}">
                    <Image Source="..\..\Icons\SelectByAttributes.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonSelectOnMap" ToolTip="Select Current INCID on Map" ToolTipService.ShowOnDisabled="True"
                          Command="{Binding Path=SelectOnMapCommand}" IsEnabled="{Binding Path=CanSelectOnMap}">
                    <Image Source="..\..\Icons\SelectOnMap.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonClearFilter" ToolTip="Clear Filter" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=ClearFilterCommand}" IsEnabled="{Binding Path=IsFiltered}">
                    <Image Source="..\..\Icons\ClearFilter.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonGetMapSelection" ToolTip="Get Map Selection" ToolTipService.ShowOnDisabled="True" 
                        Command="{Binding Path=ReadMapSelectionCommand}" IsEnabled="{Binding Path=CanReadMapSelection}">
                    <Image Source="..\..\Icons\ReadMapSelection.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonSelectByIncid" ToolTip="Select by INCID" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=SelectByIncidCommand}" IsEnabled="{Binding Path=CanSelectByIncid}">
                    <Image Source="..\..\Icons\SelectByIncid.png" Width="16" Height="16" />
                </Button>
            </ToolBar>
            <ToolBar Name="ToolBarSplitMerge" Band="1" BandIndex="4">
                <Button Name="ButtonSplit" ToolTip="Split Features" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=SplitCommand}" IsEnabled="{Binding Path=CanSplit}">
                    <Image Source="..\..\Icons\SplitFeatures.png" Width="16" Height="16" />
                </Button>
                <Button Name="ButtonMergeFeatures" ToolTip="Merge Features" ToolTipService.ShowOnDisabled="True"
                        Command="{Binding Path=MergeCommand}" IsEnabled="{Binding Path=CanMerge}">
                    <Image Source="..\..\Icons\MergeFeatures.png" Width="16" Height="16" />
                </Button>
            </ToolBar>
        </ToolBarTray>
        
        <Grid Name="GridMain" Margin="4">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--GroupBoxTopControls-->
            <GroupBox Name="GroupBoxTopControls" Grid.Row="0" Grid.Column="0" Header="{Binding Path=TopControlsGroupHeader}"
                          Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}, Mode=TwoWay}">
                <Grid Name="GridTopControls" Grid.Row="0" Margin="0,4,0,0" Panel.ZIndex="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Label Name="LabelIncid" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Right" 
                           Margin="8,0,0,4">INCID</Label>
                    <TextBox Name="TextBoxIncid" Grid.Row="0" Grid.Column="1" 
                             Text="{Binding Path=Incid, Mode=OneWay, ValidatesOnDataErrors=False}" IsEnabled="False" 
                             VerticalAlignment="Center" Margin="8,0,8,4" />

                    <Grid Name="GridIncidAttributes" Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                    
                    <Label Name="LabelIncidArea" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Right" 
                           Margin="12,0,0,4">Area [ha]</Label>
                    <TextBox Name="TextBoxIncidArea" Grid.Row="0" Grid.Column="1" 
                             Text="{Binding Path=IncidArea, Mode=OneWay, ValidatesOnDataErrors=False}" 
                             IsEnabled="False" TextAlignment="Right" VerticalAlignment="Center" 
                             Margin="8,0,8,4" />
                    <Label Name="LabelIncidLength" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right" 
                           Margin="12,0,0,4">Length [km]</Label>
                    <TextBox Name="TextBoxIncidLength" Grid.Row="0" Grid.Column="3" 
                             Text="{Binding Path=IncidLength, Mode=OneWay, ValidatesOnDataErrors=False}" 
                             TextAlignment="Right" IsEnabled="False" VerticalAlignment="Center" 
                             Margin="8,0,4,4"></TextBox>
                    </Grid>

                    <Label Name="LabelIncidCreatedDate" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="8,0,0,4" 
                               Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}}">
                        Created</Label>
                    <TextBox Name="TextBoxIncidCreatedDate" Grid.Row="1" Grid.Column="1" 
                                 Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}}"
                                 Text="{Binding Path=IncidCreatedDate, Mode=OneWay, ValidatesOnDataErrors=False}" IsEnabled="False" 
                                 TextAlignment="Right" VerticalAlignment="Center" Margin="8,0,4,4"></TextBox>

                    <Label Name="LabelIncidCreatedUser" Grid.Row="1" Grid.Column="2" VerticalAlignment="Center" 
                                   HorizontalAlignment="Left" Margin="12,0,0,4" Visibility="{Binding Path=HideInBulkUpdateMode, 
                                Converter={StaticResource bool2VisibilityConverter}}">By</Label>
                    <TextBox Name="TextBoxIncidCreatedUser" Grid.Row="1" Grid.Column="3" 
                                     Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}}"
                                     Text="{Binding Path=IncidCreatedUser, Mode=OneWay, ValidatesOnDataErrors=False}" IsEnabled="False" 
                                     TextAlignment="Right" VerticalAlignment="Center" Margin="8,0,4,4"></TextBox>

                    <Label Name="LabelIncidLastModDate" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="8,0,0,4" 
                               Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}}">
                            Modified</Label>
                    <TextBox Name="TextBoxIncidLastModDate" Grid.Row="2" Grid.Column="1" 
                                 Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}}"
                                 Text="{Binding Path=IncidLastModifiedDate, Mode=OneWay, ValidatesOnDataErrors=False}" 
                                 IsEnabled="False" TextAlignment="Right" VerticalAlignment="Center" Margin="8,0,4,4"></TextBox>

                    <Label Name="LabelIncidLastModUser" Grid.Row="2" Grid.Column="2" VerticalAlignment="Center" 
                                   HorizontalAlignment="Left" Margin="12,0,0,4" Visibility="{Binding Path=HideInBulkUpdateMode, 
                                Converter={StaticResource bool2VisibilityConverter}}">By</Label>
                    <TextBox Name="TextBoxIncidLastModUser" Grid.Row="2" Grid.Column="3" 
                             Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}}"
                             Text="{Binding Path=IncidLastModifiedUser, Mode=OneWay, ValidatesOnDataErrors=False}" 
                             IsEnabled="False" TextAlignment="Right" VerticalAlignment="Center" Margin="8,0,4,4"></TextBox>

                </Grid>
            </GroupBox>

            <!--GroupBoxTopControlsBulkUpdate-->
            <GroupBox Name="GroupBoxTopControlsBulkUpdate" Grid.Row="0" Grid.Column="0" Header="Bulk Update" 
                      Visibility="{Binding Path=ShowInBulkUpdateMode, 
                Converter={StaticResource bool2VisibilityConverter}, Mode=TwoWay}">
                <Grid Name="GridTopControlsBulkUpdate" Grid.Row="0" Margin="0,4,0,0" Panel.ZIndex="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Label Name="LabelBulkUpdateStatusDB" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="0,0,8,4">DB:</Label>
                    <Label Name="LabelBulkUpdateStatusIncid" Grid.Row="0" Grid.Column="1" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="0,0,8,4">INCID</Label>
                    <TextBox Name="TextBoxBulkUpdateStatusIncid" Grid.Row="0" Grid.Column="2" 
                                 VerticalAlignment="Center" Margin="8,0,8,4" TextAlignment="Left" 
                                 IsEnabled="False" Text="{Binding Path=NumIncidSelected, Mode=OneWay}"/>

                    <Label Name="LabelBulkUpdateStatusMap" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="0,0,8,4">Map:</Label>
                    <Label Name="LabelBulkUpdateStatusIncidMap" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="0,0,8,4">INCID</Label>
                    <TextBox Name="TextBoxBulkUpdateStatusIncidMap" Grid.Row="1" Grid.Column="2" 
                                 VerticalAlignment="Center" Margin="8,0,8,4" TextAlignment="Left" 
                                 IsEnabled="False" Text="{Binding Path=NumIncidSelectedMap, Mode=OneWay}"/>
                    <Label Name="LabelBulkUpdateStatusToid" Grid.Row="1" Grid.Column="3" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="12,0,8,4">TOID</Label>
                    <TextBox Name="TextBoxBulkUpdateStatusToid" Grid.Row="1" Grid.Column="4" 
                                 VerticalAlignment="Center" Margin="8,0,8,4" TextAlignment="Left" IsEnabled="False" 
                                 Text="{Binding Path=NumToidSelectedMap, Mode=OneWay}"/>
                    <Label Name="LabelBulkUpdateStatusFrag" Grid.Row="1" Grid.Column="5" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="12,0,8,4">Fragments</Label>
                    <TextBox Name="TextBoxBulkUpdateStatusFrag" Grid.Row="1" Grid.Column="6" 
                                 VerticalAlignment="Center" Margin="8,0,4,4" TextAlignment="Left" IsEnabled="False" 
                                 Text="{Binding Path=NumFragmentsSelectedMap, Mode=OneWay}"/>

                    <Grid Name="GridCreateHistory" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="7" 
                          HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="20" />
                        </Grid.ColumnDefinitions>
                        <Label Name="LabelBulkUpdateCreateHistory" Grid.Column="0" VerticalAlignment="Center" 
                           HorizontalAlignment="Right" Margin="0,0,8,0">Create History</Label>
                        <CheckBox Name="CheckBoxUpdateCreateHistory" Grid.Column="1" Margin="0,0,0,0" 
                              HorizontalAlignment="Right" VerticalAlignment="Bottom" 
                                  IsChecked="{Binding Path=BulkUpdateCreateHistory}" />
                    </Grid>
                </Grid>
            </GroupBox>

            <!--GroupBoxReasonProcess-->
            <GroupBox Name="GroupBoxReasonProcess" Grid.Row="1" Margin="0,4,0,0">
                <Grid Name="GridReasonProcess" Grid.Row="1" Margin="0,4,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="20" />
                    </Grid.ColumnDefinitions>

                    <Label Name="LabelReason" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="8,0,8,4">Reason</Label>
                    <ComboBox Name="ComboBoxReason" Grid.Row="0" Grid.Column="1"
                                      IsEditable="True" IsReadOnly="False" 
                                      ItemsSource="{Binding Path=ReasonCodes, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                      DisplayMemberPath="description" SelectedValuePath="code" 
                                      SelectedValue="{Binding Path=Reason, ValidatesOnDataErrors=True}" 
                                      IsEnabled="{Binding Path=ReasonProcessEnabled}" ToolTipService.ShowOnDisabled="True" 
                                      VerticalAlignment="Center" Margin="8,0,8,4" />
                    <CheckBox Name="CheckBoxCopyReason" Grid.Row="0" Grid.Column="2" 
                                      IsChecked="{Binding Path=CopySwitches.CopyReason, Mode=TwoWay, 
                                UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=ProcessEnabled, Mode=OneWay}"
                                      VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4" />

                    <Label Name="LabelProcess" Grid.Row="0" Grid.Column="3" VerticalAlignment="Center" 
                               HorizontalAlignment="Right" Margin="8,0,8,4">Process</Label>
                    <ComboBox Name="ComboBoxProcess" Grid.Row="0" Grid.Column="4"
                                      IsEditable="True" IsReadOnly="False" 
                                      ItemsSource="{Binding Path=ProcessCodes, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                      DisplayMemberPath="description" SelectedValuePath="code" 
                                      SelectedValue="{Binding Path=Process, ValidatesOnDataErrors=True}" 
                                      IsEnabled="{Binding Path=ReasonProcessEnabled}" ToolTipService.ShowOnDisabled="True" 
                                      VerticalAlignment="Center" Margin="8,0,8,4" />
                    <CheckBox Name="CheckBoxCopyProcess" Grid.Row="0" Grid.Column="5" 
                                      IsChecked="{Binding Path=CopySwitches.CopyProcess, Mode=TwoWay, 
                                UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=ProcessEnabled, Mode=OneWay}"
                                      VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4" />
                </Grid>
            </GroupBox>

            <!--TabControlData-->
            <TabControl Name="TabControlData" Grid.Row="2" Grid.Column="0" Margin="0,4,0,0" IsEnabled="{Binding Path=TabControlDataEnabled}" >
                <!--TabItemIhs-->
                <TabItem Name="TabItemIhs" IsEnabled="{Binding Path=TabItemIhsEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label FontSize="13" VerticalAlignment="Bottom" Margin="4,2,2,4">IHS</Label>
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid Name="GridTabItemIhs">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80*" />
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <!--GroupBoxIhsCategories-->
                            <GroupBox Name="GroupBoxIhsCategories" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" VerticalAlignment="Stretch" Header="IHS Habitat">
                                <Grid Name="GridCategories" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*"/>
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsCategory" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Category</Label>
                                    <Grid Name="GridIhsCategories" Grid.Row="0" Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <ComboBox Name="ComboBoxIhsCategory" Grid.Row="0" Grid.Column="0" 
                                                  IsEditable="False" IsReadOnly="False" 
                                                  ItemsSource="{Binding Path=IhsCategoryCodes, Mode=TwoWay, 
                                            UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="description" SelectedValuePath="code" 
                                                  SelectedValue="{Binding Path=IhsCategory}" ToolTipService.ShowOnDisabled="True" 
                                                  VerticalAlignment="Center" Margin="8,0,8,4" />
                                        <Label Name="LabelNvcCategory" Grid.Row="0" Grid.Column="1" 
                                               VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4">NVC</Label>
                                        <ComboBox Name="ComboBoxNvcCategory" Grid.Row="0" Grid.Column="2" 
                                                  IsEditable="False" IsReadOnly="False" ToolTipService.ShowOnDisabled="True"
                                                  ItemsSource="{Binding Path=NvcCategoryCodes, Mode=TwoWay, 
                                            UpdateSourceTrigger=PropertyChanged}" SelectedValue="{Binding Path=NvcCategory}" 
                                                  VerticalAlignment="Center" Margin="8,0,8,4" />
                                    </Grid>

                                    <Label Name="LabelIhsHabitat" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Habitat</Label>
                                    <ComboBox Name="ComboBoxIhsHabitat" Grid.Row="1" Grid.Column="1" 
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=IhsHabitatCodes, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValue="{Binding Path=IncidIhsHabitat, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsHabitatListEnabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True" 
                                              VerticalAlignment="Center" Margin="8,0,8,4"></ComboBox>
                                    <CheckBox Name="CheckBoxCopyIhsHabitat" Grid.Row="1" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsHabitat, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelNvcCodes" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,0">NVC Codes</Label>
                                    <TextBox Name="TextBoxNvcCodes" Grid.Row="2" Grid.Column="1"  VerticalAlignment="Center" 
                                             Margin="8,0,8,4" Text="{Binding Path=NvcCodes, Mode=OneWay}" IsEnabled="False" />
                                </Grid>
                            </GroupBox>

                            <!--GroupBoxIhsMatrix-->
                            <GroupBox Name="GroupBoxIhsMatrix" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" VerticalAlignment="Stretch" Header="IHS Matrix">
                                <Grid Name="GridIhsMatrix" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*"/>
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsMatrix1" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Matrix 1</Label>
                                    <ComboBox Name="ComboBoxIhsMatrix1" Grid.Row="0" Grid.Column="1"
                                              IsEditable="False" IsReadOnly="False" 
                                              VerticalAlignment="Center" Margin="8,0,8,4"
                                              ItemsSource="{Binding Path=IhsMatrix1Codes, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidIhsMatrix1, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsMatrix1Enabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True" 
                                              DropDownClosed="ComboBox_DropDownClosed" />
                                    <CheckBox Name="CheckBoxCopyIhsMatrix1" Grid.Row="0" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsMatrix1, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=IhsMatrix1Enabled, Mode=OneWay}" 
                                              VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4" />

                                    <Label Name="LabelIhsMatrix2" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Matrix 2</Label>
                                    <ComboBox Name="ComboBoxIhsMatrix2" Grid.Row="1" Grid.Column="1" 
                                              VerticalAlignment="Center" Margin="8,0,8,4"
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=IhsMatrix2Codes, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidIhsMatrix2, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsMatrix2Enabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True" 
                                              DropDownClosed="ComboBox_DropDownClosed" />
                                    <CheckBox Name="CheckBoxCopyIhsMatrix2" Grid.Row="1" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsMatrix2, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=IhsMatrix2Enabled, Mode=OneWay}" 
                                              VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4" />

                                    <Label Name="LabelIhsMatrix3" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Matrix 3</Label>
                                    <ComboBox Name="ComboBoxIhsMatrix3" Grid.Row="2" Grid.Column="1" 
                                              VerticalAlignment="Center" Margin="8,0,8,4"
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=IhsMatrix3Codes, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidIhsMatrix3, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsMatrix3Enabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True" 
                                              DropDownClosed="ComboBox_DropDownClosed" />
                                    <CheckBox Name="CheckBoxCopyIhsMatrix3" Grid.Row="2" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsMatrix3, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              IsEnabled="{Binding Path=IhsMatrix3Enabled, Mode=OneWay}" 
                                              Margin="0,0,0,4" />
                                </Grid>
                            </GroupBox>

                            <!--GroupBoxIhsFormation-->
                            <GroupBox Name="GroupBoxIhsFormation" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" VerticalAlignment="Stretch" 
                                      Header="IHS Formation">
                                <Grid Name="GridIhsFormation" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*"/>
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsFormation1" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Formation 1</Label>
                                    <ComboBox Name="ComboBoxIhsFormation1" Grid.Row="0" Grid.Column="1" 
                                              VerticalAlignment="Center" Margin="8,0,8,4"
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=IhsFormation1Codes, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidIhsFormation1, 
                                        Converter={StaticResource codeDescriptionConverter}, ConverterParameter='code^description^sort_order', 
                                        ValidatesOnDataErrors=True}" DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsFormation1Enabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True"
                                              DropDownClosed="ComboBox_DropDownClosed" />
                                    <CheckBox Name="CheckBoxCopyIhsFormation1" Grid.Row="0" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsFormation1, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=IhsFormation1Enabled, Mode=OneWay}" 
                                              VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4" />

                                    <Label Name="LabelIhsFormation2" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Formation 2</Label>
                                    <ComboBox Name="ComboBoxIhsFormation2" Grid.Row="1" Grid.Column="1" 
                                              VerticalAlignment="Center" Margin="8,0,8,4"
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=IhsFormation2Codes, Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidIhsFormation2, 
                                        Converter={StaticResource codeDescriptionConverter}, ConverterParameter='code^description^sort_order', 
                                        ValidatesOnDataErrors=True}" DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsFormation2Enabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True"
                                              DropDownClosed="ComboBox_DropDownClosed" />
                                    <CheckBox Name="CheckBoxCopyIhsFormation2" Grid.Row="1" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsFormation2, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=IhsFormation2Enabled, Mode=OneWay}" 
                                              VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4" />
                                </Grid>
                            </GroupBox>

                            <!--GroupBoxIhsManagement-->
                            <GroupBox Name="GroupBoxIhsManagement" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" 
                                      VerticalAlignment="Stretch" Header="IHS Management">
                                <Grid Name="GridIhsManagement" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*"/>
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsManagement1" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Management 1</Label>
                                    <ComboBox Name="ComboBoxIhsManagement1" Grid.Row="0" Grid.Column="1" 
                                              VerticalAlignment="Center" Margin="8,0,8,4"
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=IhsManagement1Codes, Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidIhsManagement1, Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsManagement1Enabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True"
                                              DropDownClosed="ComboBox_DropDownClosed" Padding="4,3" />
                                    <CheckBox Name="CheckBoxCopyIhsManagement1" Grid.Row="0" Grid.Column="2" 
                                               VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsManagement1, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=IhsManagement1Enabled, 
                                        Mode=OneWay}" />

                                    <Label Name="LabelIhsManagement2" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Management 2</Label>
                                    <ComboBox Name="ComboBoxIhsManagement2" Grid.Row="1" Grid.Column="1" 
                                              VerticalAlignment="Center" Margin="8,0,8,4" 
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=IhsManagement2Codes,
                                        Converter={StaticResource codeDescriptionConverter}, ConverterParameter='code^description^sort_order', 
                                        UpdateSourceTrigger=PropertyChanged}" SelectedValue="{Binding Path=IncidIhsManagement2, 
                                        Converter={StaticResource codeDescriptionConverter}, ConverterParameter='code^description^sort_order', 
                                        ValidatesOnDataErrors=True}" DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsManagement2Enabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True" 
                                              DropDownClosed="ComboBox_DropDownClosed" />
                                    <CheckBox Name="CheckBoxCopyIhsManagement2" Grid.Row="1" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsManagement2, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=IhsManagement2Enabled, 
                                        Mode=OneWay}" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4" />
                                </Grid>
                            </GroupBox>

                            <!--GroupBoxIhsComplex-->
                            <GroupBox Name="GroupBoxIhsComplex" Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="3" 
                                      VerticalAlignment="Stretch" Header="IHS Complex">
                                <Grid Name="GridIhsComplex" Margin="0,6,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*"/>
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsComplex1" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Complex 1</Label>
                                    <ComboBox Name="ComboBoxIhsComplex1" Grid.Row="0" Grid.Column="1" 
                                              VerticalAlignment="Center" Margin="8,0,8,4"
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=IhsComplex1Codes, 
                                        Converter={StaticResource codeDescriptionConverter}, ConverterParameter='code^description^sort_order', 
                                        UpdateSourceTrigger=PropertyChanged}" SelectedValue="{Binding Path=IncidIhsComplex1, 
                                        Converter={StaticResource codeDescriptionConverter}, ConverterParameter='code^description^sort_order', 
                                        ValidatesOnDataErrors=True}" DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsComplex1Enabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True" 
                                              DropDownClosed="ComboBox_DropDownClosed" />
                                    <CheckBox Name="CheckBoxCopyIhsComplex1" Grid.Row="0" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsComplex1, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=IhsComplex1Enabled, Mode=OneWay}" 
                                              VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4" />

                                    <Label Name="LabelIhsComplex2" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Complex 2</Label>
                                    <ComboBox Name="ComboBoxIhsComplex2" Grid.Row="1" Grid.Column="1" 
                                              VerticalAlignment="Center" Margin="8,0,8,4"
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=IhsComplex2Codes, Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidIhsComplex2, 
                                        Converter={StaticResource codeDescriptionConverter}, ConverterParameter='code^description^sort_order', 
                                        ValidatesOnDataErrors=True}" DisplayMemberPath="description" SelectedValuePath="code" 
                                              IsEnabled="{Binding Path=IhsComplex2Enabled, Mode=OneWay}" ToolTipService.ShowOnDisabled="True" 
                                              DropDownClosed="ComboBox_DropDownClosed" />
                                    <CheckBox Name="CheckBoxCopyIhsComplex2" Grid.Row="1" Grid.Column="2" 
                                              Margin="0,0,0,4" VerticalAlignment="Center" HorizontalAlignment="Right"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidIhsComplex2, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=IhsComplex2Enabled, 
                                        Mode=OneWay}" />
                                </Grid>
                            </GroupBox>

                            <!--GroupBoxIhsSummary-->
                            <GroupBox Name="GroupBoxIhsSummary" Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="3" 
                                      VerticalAlignment="Stretch" Header="Summary">
                                <Grid Name="GridSummary" Margin="0,4,0,2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80" />
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIhsSummary" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,0">IHS Summary</Label>
                                    <Grid Name="GridIhsSummary" Grid.Row="0" Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TextBox Name="TextBoxIhsSummary" Grid.Row="0" Grid.Column="0" Margin="8,0,8,0" 
                                                 Text="{Binding Path=IncidIhsSummary, Mode=OneWay, ValidatesOnDataErrors=False}" 
                                                 IsEnabled="False" VerticalAlignment="Center" />
                                        <Label Name="LabelLegacyHabitat" Grid.Row="0" Grid.Column="1" VerticalAlignment="Center" 
                                               HorizontalAlignment="Right" Margin="0,0,0,0">Legacy Habitat</Label>
                                        <TextBox Name="TextBoxLegacyHabitat" Grid.Row="0" Grid.Column="2" Margin="8,0,8,0"
                                                 Text="{Binding Path=IncidLegacyHabitat, Mode=OneWay, ValidatesOnDataErrors=False}" 
                                                 IsEnabled="False" VerticalAlignment="Center" />
                                    </Grid>
                                </Grid>
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>

                <!--TabItemDetails-->
                <TabItem Name="TabItemDetails" IsEnabled="{Binding Path=TabItemDetailsEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label FontSize="13" VerticalAlignment="Bottom" Margin="4,2,2,4">Details</Label>
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid Name="GridTabItemDetails">
                            <Grid.RowDefinitions>
                                <RowDefinition MinHeight="173" /> <!--Height="140"-->
                                <RowDefinition MinHeight="173" /> <!--Height="140"-->
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" /> <!--"130" />-->
                                <ColumnDefinition />
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <GroupBox Name="GroupBoxPrimaryBapHabitats" Grid.Row="0" Grid.Column="0" VerticalAlignment="Stretch" 
                                      Grid.ColumnSpan="3" Header="Priority Habitats">
                                <Grid Name="GridBapHabitatsPrimary" Margin="0,10,0,2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition /> 
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" /> <!--"130" />-->
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <tkit:DataGrid Name="DataGridPrimaryBapHabitats" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"
                                                 RowDetailsVisibilityMode="Visible" BorderBrush="Black" BorderThickness="1" 
                                                 RowHeight="24" Padding="2,0" Margin="8,0,8,4" AutoGenerateColumns="False" 
                                                 HeadersVisibility="All" RowHeaderWidth="20" 
                                                 CanUserAddRows="False" CanUserDeleteRows="False" CanUserReorderColumns="False" 
                                                 CanUserResizeColumns="True" CanUserSortColumns="True"
                                                 IsEnabled="{Binding Path=BapHabitatsAutoEnabled}"
                                                 ItemsSource="{Binding Path=IncidBapHabitatsAuto}">
                                        <tkit:DataGrid.RowValidationRules>
                                            <DataErrorValidationRule />
                                        </tkit:DataGrid.RowValidationRules>
                                        <tkit:DataGrid.Columns>
                                            <tkit:DataGridTextColumn Header="bap_id" Binding="{Binding bap_id}" IsReadOnly="True" Visibility="Collapsed"></tkit:DataGridTextColumn>
                                            <tkit:DataGridTextColumn Header="INCID" Binding="{Binding incid}" IsReadOnly="True" Visibility="Collapsed"></tkit:DataGridTextColumn>
                                            <hlu:DataGridComboBoxColumnWithBinding Header="Priority Habitat" IsReadOnly="True" Width="SizeToCells" MinWidth="125" CanUserResize="True"
                                                                                    SelectedValueBinding="{Binding bap_habitat}"
                                                                                    SelectedValuePath="code" DisplayMemberPath="description"
                                                                                    ItemsSource="{Binding DataContext.BapHabitatCodes, 
                                                                                    RelativeSource={RelativeSource Mode=FindAncestor, 
                                                                                    AncestorType={x:Type Window}}, IsAsync=true}" 
                                                                                    EditingElementStyle="{StaticResource ComboBoxStyle}">
                                                                                    </hlu:DataGridComboBoxColumnWithBinding>
                                            <hlu:DataGridComboBoxColumnWithBinding Header="Determination Quality" Width="SizeToCells" MinWidth="125" CanUserResize="True"
                                                                                    SelectedValueBinding="{Binding quality_determination, ValidatesOnDataErrors=True}"
                                                                                    SelectedValuePath="code" DisplayMemberPath="description"
                                                                                    ItemsSource="{Binding DataContext.BapDeterminationQualityCodesAuto, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, IsAsync=true}" 
                                                                                    EditingElementStyle="{StaticResource ComboBoxStyle}">
                                                                                    </hlu:DataGridComboBoxColumnWithBinding>
                                            <hlu:DataGridComboBoxColumnWithBinding Header="Interpretation Quality" Width="SizeToCells" MinWidth="125" CanUserResize="True"
                                                                                    SelectedValueBinding="{Binding quality_interpretation, ValidatesOnDataErrors=True}"
                                                                                    SelectedValuePath="code" DisplayMemberPath="description"
                                                                                    ItemsSource="{Binding DataContext.BapInterpretationQualityCodes, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, IsAsync=true}" 
                                                                                    EditingElementStyle="{StaticResource ComboBoxStyle}" />
                                            <tkit:DataGridTextColumn Header="Interpretation Comments"
                                                                   Binding="{Binding interpretation_comments, ValidatesOnDataErrors=True}" 
                                                                   Width="SizeToCells" MinWidth="125" CanUserResize="True"
                                                                   EditingElementStyle="{StaticResource TextBoxStyle}" />
                                        </tkit:DataGrid.Columns>
                                        <!--
                                        <tkit:DataGrid.RowDetailsTemplate>
                                            <DataTemplate>
                                                <Grid TextBlock.Foreground="Black">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <TextBlock Text="{Binding interpretation_comments}" Grid.Row="0"/>
                                                </Grid>
                                            </DataTemplate>
                                        </tkit:DataGrid.RowDetailsTemplate>
                                        -->
                                    </tkit:DataGrid>
                                </Grid>
                            </GroupBox>

                            <GroupBox Name="GroupBoxSecondaryBapHabitats" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" VerticalAlignment="Stretch"
                                      Header="Potential Priority Habitats">
                                <Grid Name="GridBapHabitatsUser" Margin="0,10,0,2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" /> <!--130" />-->
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <tkit:DataGrid Name="DataGridUserBapHabitats" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" 
                                                 RowDetailsVisibilityMode="Visible" BorderBrush="Black" BorderThickness="1" 
                                                 RowHeight="24" Padding="2,0" Margin="8,0,8,4"
                                                 HeadersVisibility="All" RowHeaderWidth="20" AutoGenerateColumns="False" 
                                                 CanUserReorderColumns="False" CanUserResizeColumns="True" CanUserSortColumns="True"
                                                 CanUserAddRows="True" CanUserDeleteRows="True" 
                                                 IsEnabled="{Binding Path=BapHabitatsUserEnabled}"
                                                 ItemsSource="{Binding Path=IncidBapHabitatsUser}">
                                        <tkit:DataGrid.RowValidationRules>
                                            <DataErrorValidationRule />
                                        </tkit:DataGrid.RowValidationRules>
                                        <tkit:DataGrid.Columns>
                                            <tkit:DataGridTextColumn Header="bap_id" Binding="{Binding bap_id}" IsReadOnly="True" 
                                                                   Visibility="Collapsed" />
                                            <tkit:DataGridTextColumn Header="INCID" Binding="{Binding incid}" IsReadOnly="True" 
                                                                   Visibility="Collapsed" />
                                            <hlu:DataGridComboBoxColumnWithBinding Header="Priority Habitat" IsReadOnly="False" Width="SizeToCells" MinWidth="125" CanUserResize="True"
                                                                                    SelectedValueBinding="{Binding bap_habitat, ValidatesOnDataErrors=True}"
                                                                                    SelectedValuePath="code" DisplayMemberPath="description"
                                                                                    ItemsSource="{Binding DataContext.BapHabitatCodes, 
                                                                                    RelativeSource={RelativeSource Mode=FindAncestor, 
                                                                                    AncestorType={x:Type Window}}, IsAsync=true}" 
                                                                                    EditingElementStyle="{StaticResource ComboBoxStyle}" />
                                            <hlu:DataGridComboBoxColumnWithBinding Header="Determination Quality" Width="SizeToCells" 
                                                                                    MinWidth="125" CanUserResize="True"
                                                                                    SelectedValueBinding="{Binding quality_determination, ValidatesOnDataErrors=True}"
                                                                                    SelectedValuePath="code" DisplayMemberPath="description"
                                                                                    ItemsSource="{Binding DataContext.BapDeterminationQualityCodesUser, 
                                                                                    RelativeSource={RelativeSource Mode=FindAncestor, 
                                                                                    AncestorType={x:Type Window}}, IsAsync=true}" 
                                                                                    EditingElementStyle="{StaticResource ComboBoxStyle}" />
                                            <hlu:DataGridComboBoxColumnWithBinding Header="Interpretation Quality" Width="SizeToCells" MinWidth="125" CanUserResize="True"
                                                                                    SelectedValueBinding="{Binding quality_interpretation, ValidatesOnDataErrors=True}"
                                                                                    SelectedValuePath="code" DisplayMemberPath="description"
                                                                                    ItemsSource="{Binding DataContext.BapInterpretationQualityCodes, 
                                                                                    RelativeSource={RelativeSource Mode=FindAncestor, 
                                                                                    AncestorType={x:Type Window}}, IsAsync=true}" 
                                                                                    EditingElementStyle="{StaticResource ComboBoxStyle}" />
                                            <tkit:DataGridTextColumn Header="Interpretation Comments"
                                                                   Binding="{Binding interpretation_comments, ValidatesOnDataErrors=True}" 
                                                                   Width="SizeToCells" MinWidth="125" CanUserResize="True"
                                                                   EditingElementStyle="{StaticResource TextBoxStyle}" />
                                        </tkit:DataGrid.Columns>
                                        <!--
                                        <tkit:DataGrid.RowDetailsTemplate>
                                            <DataTemplate>
                                                <Grid TextBlock.Foreground="Black">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <TextBlock Text="{Binding interpretation_comments}" Grid.Row="0"/>
                                                </Grid>
                                            </DataTemplate>
                                        </tkit:DataGrid.RowDetailsTemplate>
                                        -->
                                    </tkit:DataGrid>
                                    <CheckBox Name="CheckBoxCopyBapHabitatUser" Grid.Row="0" Grid.Column="2" 
                                              VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4"
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidBapHabitatsUser, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=BapHabitatsUserEnabled}" />
                                </Grid>
                            </GroupBox>

                            <!--GroupBoxGeneralComments-->
                            <GroupBox Name="GroupBoxGeneralComments" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" VerticalAlignment="Stretch" 
                                      Header="General Comments">
                                <Grid Name="GridGeneralComments" Margin="0,10,0,2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition MaxHeight="40" /> <!--Height="40"-->
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" /> <!--130" />-->
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <TextBox Name="TextBoxIncidGeneralComments" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" 
                                             Margin="8,0,8,4" BorderThickness="1" TextWrapping="Wrap" MaxLength="254"
                                             Text="{Binding Path=IncidGeneralComments, Mode=TwoWay, ValidatesOnDataErrors=True}" 
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyGeneralComments" Grid.Row="0" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidGeneralComments, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />
                                </Grid>
                            </GroupBox>

                            <!--GroupBoxMaps-->
                            <GroupBox Name="GroupBoxMaps" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" Header="Maps">
                                <Grid Name="GridMaps" Margin="0,8,0,4">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" /> <!--"130" />-->
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Grid Name="DetailsMaps" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="90" />
                                            <ColumnDefinition Width="Auto" MinWidth="100" />
                                            <ColumnDefinition Width="20"/>
                                            <ColumnDefinition Width="Auto" MinWidth="100" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <Label Name="LabelBoundaryBaseMap" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                               HorizontalAlignment="Left" Margin="8,0,8,4">Boundary Map</Label>
                                        <ComboBox Name="ComboBoxIncidBoundaryBaseMap" Grid.Row="0" Grid.Column="1" 
                                                  IsEditable="False" IsReadOnly="False"
                                                  ItemsSource="{Binding Path=BoundaryMapCodes, UpdateSourceTrigger=PropertyChanged}" 
                                                  SelectedValue="{Binding Path=IncidBoundaryBaseMap, ValidatesOnDataErrors=True}" 
                                                  DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                                  Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox Name="CheckBoxCopyBoundaryBaseMap" Grid.Row="0" Grid.Column="2" 
                                                  IsChecked="{Binding Path=CopySwitches.CopyIncidBoundaryBaseMap, Mode=TwoWay, 
                                            UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" 
                                                  HorizontalAlignment="Right" Margin="0,0,0,4" />
                                        <Label Name="LabelDigitisationBaseMap" Grid.Row="0" Grid.Column="3" VerticalAlignment="Center" 
                                               HorizontalAlignment="Right" Margin="8,0,8,4">Digitisation Map</Label>
                                        <ComboBox Name="ComboBoxIncidDigitisationBaseMap" Grid.Row="0" Grid.Column="4" 
                                                  IsEditable="False" IsReadOnly="False"
                                                  ItemsSource="{Binding Path=BoundaryMapCodes, UpdateSourceTrigger=PropertyChanged}" 
                                                  SelectedValue="{Binding Path=IncidDigitisationBaseMap, ValidatesOnDataErrors=True}" 
                                                  DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                                  Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                    <CheckBox Name="CheckBoxCopyDigitisationBaseMap" Grid.Row="0" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidDigitisationBaseMap, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />
                                </Grid>
                            </GroupBox>

                            <!--GroupBoxBiosite-->
                            <GroupBox Name="GroupBoxBiosite" Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="3" VerticalAlignment="Stretch" Header="Biosite">
                                <Grid Name="GridBiosite" Margin="0,10,0,4">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" MinWidth="90" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelBiositeName" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Left" Margin="8,0,8,4">Biosite Name</Label>
                                    <TextBox Name="TextBoxBiositeName" Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="1" 
                                             Margin="8,0,8,4" BorderThickness="1" TextWrapping="Wrap" MaxLength="100"
                                             Text="{Binding Path=IncidSiteName, Mode=TwoWay, ValidatesOnDataErrors=True}" 
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSiteName" Grid.Row="0" Grid.Column="3" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSiteName, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" 
                                              VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4" />
                                </Grid>
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>

                <!--TabItemSources-->
                <TabItem Name="TabItemSources" IsEnabled="{Binding Path=TabItemSourcesEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label FontSize="13" VerticalAlignment="Bottom" Margin="4,2,2,4">Sources</Label>
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid Name="GridTabItemSources">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" /> <!--MinHeight="167"-->
                                <RowDefinition Height="Auto" /> <!--MinHeight="167"-->
                                <RowDefinition Height="Auto" /> <!--MinHeight="167"-->
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80*" />
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <GroupBox Name="GroupBoxSource1" Header="Source 1" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3">
                                <Grid Name="GridSource1" Margin="0,11,0,11">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*"/>
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIncidSource1Name" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="4,0,0,4">Name</Label>
                                    <ComboBox Name="ComboBoxIncidSource1Name" Grid.Row="0" Grid.Column="1" 
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=Source1Names, UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidSource1Id, ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="source_name" SelectedValuePath="source_id" 
                                              VerticalAlignment="Center" Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource1Name" Grid.Row="0" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1Id, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource1Date" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Vague Date</Label>
                                    <TextBox Name="TextBoxIncidSource1Date" Grid.Row="1" Grid.Column="1" 
                                             Text="{Binding Path=IncidSource1Date, Converter={StaticResource vagueDateConverter}, 
                                        ConverterParameter='source_date_start^source_date_end^source_date_type', Mode=TwoWay, 
                                        ValidatesOnDataErrors=True}" VerticalAlignment="Center" Margin="8,0,8,4" BorderThickness="1" 
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource1Date" Grid.Row="1" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1Date, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource1HabitatClass" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Habitat Class</Label>
                                    <ComboBox Name="ComboBoxIncidSource1HabitatClass" Grid.Row="2" Grid.Column="1" 
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=SourceHabitatClassCodes, UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidSource1HabitatClass, ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                              Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource1HabitatClass" Grid.Row="2" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1HabitatClass, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource1HabitatType" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Habitat Type</Label>

                                    <ComboBox Name="ComboBoxIncidSource1HabitatType" Grid.Row="3" Grid.Column="1" 
                                              IsEditable="True" IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source1HabitatTypeCodes, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidSource1HabitatType, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                              Margin="8,0,8,4" KeyUp="EditableComboBox_KeyUp" ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource1HabitatType" Grid.Row="3" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1HabitatType, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource1BoundaryImportance" Grid.Row="4" Grid.Column="0" 
                                           VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4">Boundary Imp.</Label>
                                    <Grid Name="GridSource1Importance" Grid.Row="4" Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="20"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <ComboBox Name="ComboBoxIncidSource1BoundaryImportance" Grid.Row="0" Grid.Column="0" 
                                                  IsEditable="False" IsReadOnly="False" 
                                                  ItemsSource="{Binding Path=SourceImportanceCodes, UpdateSourceTrigger=PropertyChanged}" 
                                                  SelectedValue="{Binding Path=IncidSource1BoundaryImportance, ValidatesOnDataErrors=True}" 
                                                  DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                                  Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox Name="CheckBoxCopySource1BoundaryImportance" Grid.Row="0" Grid.Column="1" 
                                                  IsChecked="{Binding Path=CopySwitches.CopyIncidSource1BoundaryImportance, 
                                            Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" 
                                                  HorizontalAlignment="Right" Margin="0,0,0,4" />
                                        <Label Name="LabelIncidSource1HabitatImportance" Grid.Row="0" Grid.Column="2" 
                                               VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4">Habitat Imp.</Label>
                                        <ComboBox Name="ComboBoxIncidSource1HabitatImportance" Grid.Row="3" Grid.Column="3" 
                                                  IsEditable="False" IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes, UpdateSourceTrigger=PropertyChanged}" 
                                                  SelectedValue="{Binding Path=IncidSource1HabitatImportance, ValidatesOnDataErrors=True}" 
                                                  DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                                  Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                    <CheckBox Name="CheckBoxCopySource1HabitatImportance" Grid.Row="4" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource1HabitatImportance, 
                                        Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" 
                                              HorizontalAlignment="Right" Margin="0,0,0,4" />
                                </Grid>
                            </GroupBox>

                            <GroupBox Name="GroupBoxSource2" Header="Source 2" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3">
                                <Grid Name="GridSource2" Margin="0,11,0,11">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*"/>
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIncidSource2Name" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="4,0,0,4">Name</Label>
                                    <ComboBox Name="ComboBoxIncidSource2Name" Grid.Row="0" Grid.Column="1" 
                                              IsEditable="False" IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source2Names, UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidSource2Id, ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="source_name" SelectedValuePath="source_id" 
                                              VerticalAlignment="Center" Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource2Name" Grid.Row="0" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2Id, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource2Date" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Vague Date</Label>
                                    <TextBox Name="TextBoxIncidSource2Date" Grid.Row="1" Grid.Column="1" 
                                             Text="{Binding Path=IncidSource2Date, Converter={StaticResource vagueDateConverter}, 
                                        ConverterParameter='source_date_start^source_date_end^source_date_type', Mode=TwoWay, 
                                        ValidatesOnDataErrors=True}" VerticalAlignment="Center" Margin="8,0,8,4" BorderThickness="1" 
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource2Date" Grid.Row="1" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2Date, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource2HabitatClass" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Habitat Class</Label>
                                    <ComboBox Name="ComboBoxIncidSource2HabitatClass" Grid.Row="2" Grid.Column="1" 
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=SourceHabitatClassCodes, UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidSource2HabitatClass, ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                              Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource2HabitatClass" Grid.Row="2" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2HabitatClass, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource2HabitatType" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Habitat Type</Label>
                                    <ComboBox Name="ComboBoxIncidSource2HabitatType" Grid.Row="3" Grid.Column="1" 
                                              IsEditable="True" IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source2HabitatTypeCodes, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidSource2HabitatType, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Top" 
                                              Margin="8,0,8,4" KeyUp="EditableComboBox_KeyUp" ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource2HabitatType" Grid.Row="3" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2HabitatType, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource2BoundaryImportance" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Boundary Imp.</Label>
                                    <Grid Name="GridSource2Importance" Grid.Row="4" Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="20"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <ComboBox Name="ComboBoxIncidSource2BoundaryImportance" Grid.Row="0" Grid.Column="0" 
                                                  IsEditable="False" IsReadOnly="False" 
                                                  ItemsSource="{Binding Path=SourceImportanceCodes, UpdateSourceTrigger=PropertyChanged}" 
                                                  SelectedValue="{Binding Path=IncidSource2BoundaryImportance, ValidatesOnDataErrors=True}" 
                                                  DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                                  Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox Name="CheckBoxCopySource2BoundaryImportance" Grid.Row="0" Grid.Column="1" 
                                                  IsChecked="{Binding Path=CopySwitches.CopyIncidSource2BoundaryImportance, 
                                            Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" 
                                                  HorizontalAlignment="Right" Margin="0,0,0,4" />
                                        <Label Name="LabelIncidSource2HabitatImportance" Grid.Row="0" Grid.Column="2" 
                                               VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4">Habitat Imp.</Label>
                                        <ComboBox Name="ComboBoxIncidSource2HabitatImportance" Grid.Row="3" Grid.Column="3" 
                                                  IsEditable="False" IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes, UpdateSourceTrigger=PropertyChanged}" 
                                                  SelectedValue="{Binding Path=IncidSource2HabitatImportance, ValidatesOnDataErrors=True}" 
                                                  DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                                  Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                    <CheckBox Name="CheckBoxCopySource2HabitatImportance" Grid.Row="4" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource2HabitatImportance, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />
                                </Grid>
                            </GroupBox>

                            <GroupBox Name="GroupBoxSource3" Header="Source 3" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3">
                                <Grid Name="GridSource3" Margin="0,11,0,11">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="358*"/>
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <Label Name="LabelIncidSource3Name" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="4,0,0,4">Name</Label>
                                    <ComboBox Name="ComboBoxIncidSource3Name" Grid.Row="0" Grid.Column="1" 
                                              IsEditable="False" IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source3Names, UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidSource3Id, ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="source_name" SelectedValuePath="source_id" VerticalAlignment="Center" 
                                              Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource3Name" Grid.Row="0" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3Id, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource3Date" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Vague Date</Label>
                                    <TextBox Name="TextBoxIncidSource3Date" Grid.Row="1" Grid.Column="1" 
                                             Text="{Binding Path=IncidSource3Date, Converter={StaticResource vagueDateConverter}, 
                                        ConverterParameter='source_date_start^source_date_end^source_date_type', Mode=TwoWay, 
                                        ValidatesOnDataErrors=True}" VerticalAlignment="Center" Margin="8,0,8,4" BorderThickness="1" 
                                             ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource3Date" Grid.Row="1" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3Date, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource3HabitatClass" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Habitat Class</Label>
                                    <ComboBox Name="ComboBoxIncidSource3HabitatClass" Grid.Row="2" Grid.Column="1" 
                                              IsEditable="False" IsReadOnly="False" 
                                              ItemsSource="{Binding Path=SourceHabitatClassCodes, UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidSource3HabitatClass, ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                              Margin="8,0,8,4" ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopySource3HabitatClass" Grid.Row="2" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3HabitatClass, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource3HabitatType" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" 
                                           HorizontalAlignment="Right" Margin="0,0,0,4">Habitat Type</Label>
                                    <ComboBox Name="ComboBoxIncidSource3HabitatType" Grid.Row="3" Grid.Column="1" 
                                              IsEditable="True" IsReadOnly="False"
                                              ItemsSource="{Binding Path=Source3HabitatTypeCodes, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedValue="{Binding Path=IncidSource3HabitatType, 
                                        Converter={StaticResource codeDescriptionConverter}, 
                                        ConverterParameter='code^description^sort_order', ValidatesOnDataErrors=True}" 
                                              DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                              Margin="8,0,8,4" KeyUp="EditableComboBox_KeyUp" ToolTipService.ShowOnDisabled="True" />
                                    <CheckBox Name="CheckBoxCopyIncidSource3HabitatType" Grid.Row="3" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3HabitatType, Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                              Margin="0,0,0,4" />

                                    <Label Name="LabelIncidSource3BoundaryImportance" Grid.Row="4" Grid.Column="0" 
                                           VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4">
                                        Boundary Imp.</Label>
                                    <Grid Name="GridSource3Importance" Grid.Row="4" Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="20"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <ComboBox Name="ComboBoxIncidSource3BoundaryImportance" Grid.Row="0" Grid.Column="0" 
                                                  IsEditable="False" IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes, UpdateSourceTrigger=PropertyChanged}" 
                                                  SelectedValue="{Binding Path=IncidSource3BoundaryImportance, ValidatesOnDataErrors=True}" 
                                                  DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                                  Margin="8,0,8,4" />
                                        <CheckBox Name="CheckBoxCopySource3BoundaryImportance" Grid.Row="0" Grid.Column="1" 
                                                  IsChecked="{Binding Path=CopySwitches.CopyIncidSource3BoundaryImportance, 
                                            Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" 
                                                  HorizontalAlignment="Right" Margin="0,0,0,4" />

                                        <Label Name="LabelIncidSource3HabitatImportance" Grid.Row="0" Grid.Column="2" 
                                               VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,0,4">Habitat Imp.</Label>
                                        <ComboBox Name="ComboBoxIncidSource3HabitatImportance" Grid.Row="3" Grid.Column="3" 
                                                  IsEditable="False" IsReadOnly="False"
                                                  ItemsSource="{Binding Path=SourceImportanceCodes, UpdateSourceTrigger=PropertyChanged}" 
                                                  SelectedValue="{Binding Path=IncidSource3HabitatImportance, ValidatesOnDataErrors=True}" 
                                                  DisplayMemberPath="description" SelectedValuePath="code" VerticalAlignment="Center" 
                                                  Margin="8,0,8,4" />
                                    </Grid>
                                    <CheckBox Name="CheckBoxCopySource3HabitatImportance" Grid.Row="4" Grid.Column="2" 
                                              IsChecked="{Binding Path=CopySwitches.CopyIncidSource3HabitatImportance, 
                                        Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" 
                                              HorizontalAlignment="Right" Margin="0,0,0,4" />
                                </Grid>
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>

                <!--TabItemHistory-->
                <TabItem Name="TabItemHistory" IsEnabled="{Binding Path=TabItemHistoryEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label FontSize="13" VerticalAlignment="Bottom" Margin="4,2,2,4">History</Label>
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid Name="GridTabItemHistory">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" MinHeight="550" MaxHeight="550"/>  <!-- Height="350*"-->
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <GroupBox Name="GroupBoxModificationHistory" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" 
                                      Header="Modification History">
                                <ItemsControl Name="ItemsControlModificationHistory" Grid.Row="0" 
                                              BorderBrush="Black" BorderThickness="2" Margin="8,8,8,8" 
                                              Foreground="Black" Background="#FFD6D6D6"
                                              ItemsSource="{Binding Path=IncidHistory, Mode=OneWay, 
                                    UpdateSourceTrigger=PropertyChanged}" />
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>
            </TabControl>

            <!--DockPanelGetMapSelection-->
            <DockPanel Name="DockPanelGetMapSelection" Grid.Row="2" Grid.Column="0" MaxHeight="25" Panel.ZIndex="5" VerticalAlignment="Top" Margin="0,4,0,0">
                <Grid Name="GridStatusTop" 
                      Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Label Name="LabelStatusTop" Grid.Column="0" Margin="2,7,36,0"
                           VerticalAlignment="Center" HorizontalAlignment="Right">
                        <TextBlock Name="TextBlockStatusTop" Text="{Binding Path=StatusTop}">
                            <TextBlock.Triggers>
                                <EventTrigger RoutedEvent="TextBlock.Loaded">
                                  <BeginStoryboard>
                                    <Storyboard>
                                      <DoubleAnimation
                                        Storyboard.TargetName="TextBlockStatusTop" 
                                        Storyboard.TargetProperty="(TextBlock.Opacity)"
                                        From="1.0" To="1.0" Duration="0:0:5" 
                                        AutoReverse="True" RepeatBehavior="Forever" />
                                    </Storyboard>
                                  </BeginStoryboard>
                                </EventTrigger>
                            </TextBlock.Triggers>
                        </TextBlock>
                    </Label>
                </Grid>
            </DockPanel>

            <!--ButtonGetMapSelection2-->
            <Button Name="ButtonGetMapSelection2" Grid.Row="2" Grid.Column="1" VerticalAlignment="Top" HorizontalAlignment="Right"
                    Width="20" MaxHeight="20" Margin="0,10,8,0" ToolTip="Get Map Selection" ToolTipService.ShowOnDisabled="True" 
                    MouseEnter="ButtonGetMapSelection2_MouseEnter" MouseLeave="ButtonGetMapSelection2_MouseLeave" 
                    Command="{Binding Path=ReadMapSelectionCommand}" IsEnabled="{Binding Path=CanReadMapSelection}">
                <Image Name="Normal" Source="..\..\Icons\ReadMapSelection.png" Width="16" Height="16" />
            </Button>

            <!--GridNavigation-->
            <Grid Name="GridStatus" Grid.Row="3" IsEnabled="{Binding Path=WindowEnabled}" Margin="0,4,0,0" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Grid Name="GridBulkUpdate" Grid.Column="0" Height="23" VerticalAlignment="Bottom" 
                      Visibility="{Binding Path=ShowInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}, Mode=TwoWay}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Label Name="LabelBulkUpdate" FontWeight="Bold" 
                           FontStretch="UltraExpanded" VerticalAlignment="Center" HorizontalAlignment="Right" 
                           Margin="0,0,8,0" Content="Bulk Update. Affected:" />
                </Grid>
                
                <Grid Name="GridNavigation" Grid.Column="0" Height="23" VerticalAlignment="Bottom"
                      Visibility="{Binding Path=HideInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}, Mode=TwoWay}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="40" />
                        <ColumnDefinition Width="25" />
                        <ColumnDefinition Width="25" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="25" />
                        <ColumnDefinition Width="25" />
                    </Grid.ColumnDefinitions>
                    <Label Name="LabelNavigation" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center" 
                       Margin="0,0,4,0">INCID:</Label>
                    <Button Name="ButtonFirstRecord" Grid.Column="1" Margin="0,0,1,0"
                             Command="{Binding Path=NavigateFirstCommand}">|&lt;</Button>
                    <Button Name="ButtonPreviousRecord" Grid.Column="2" Margin="0,0,1,0" 
                            Command="{Binding Path=NavigatePreviousCommand}">&lt;</Button>
                    <TextBox Name="TextBoxRecordNumber" Grid.Column="3" TextAlignment="Center"
                         Text="{Binding Path=IncidCurrentRowIndex, Mode=TwoWay, ValidatesOnDataErrors=True}" />
                    <Button Name="ButtonNextRecord" Grid.Column="4" Margin="1,0,0,0" 
                            Command="{Binding Path=NavigateNextCommand}">&gt;</Button>
                    <Button Name="ButtonLastRecord" Grid.Column="5" Margin="1,0,0,0" 
                            Command="{Binding Path=NavigateLastCommand}">&gt;|</Button>
                </Grid>

                <Grid Name="GridLabelStatusIncid" Grid.Column="1" Height="23" VerticalAlignment="Bottom">
                    <Label Name="LabelStatusIncid" Grid.Column="0" 
                       HorizontalAlignment="Left" VerticalAlignment="Center" Margin="8,0,4,0" 
                       Content="{Binding Path=StatusIncid, UpdateSourceTrigger=PropertyChanged}" 
                       ToolTip="{Binding Path=StatusIncidToolTip, UpdateSourceTrigger=PropertyChanged}" 
                       MouseDoubleClick="LabelStatusIncid_MouseDoubleClick" />
                </Grid>

                <Grid Name="GridCommandButtons" Grid.Column="2" HorizontalAlignment="Right" Height="23" VerticalAlignment="Bottom">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="60"/>
                    </Grid.ColumnDefinitions>

                    <Button Name="ButtonCancelBulkUpdate" Grid.Column="1" Margin="2,0,2,0"
                            Visibility="{Binding Path=ShowInBulkUpdateMode, Converter={StaticResource bool2VisibilityConverter}}" 
                            Command="{Binding Path=CancelBulkUpdateCommand}">_Cancel
                    </Button>
                    <Button Name="ButtonUpdate" Grid.Column="2" Margin="2,0,0,0" Background="Red" Foreground="White"
                            Command="{Binding Path=UpdateCommand}" IsEnabled="{Binding Path=CanUpdate}">Appl_y</Button>
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
